import{h as e,r as a,j as s,aA as r,X as t,aB as n,aC as l,aD as o,aE as i,aF as c,aG as d,aH as u,aI as m,aJ as x,o as g,aK as p,a0 as h,aL as f,aM as b,aN as y}from"./vendor-B6Kw3iAB.js";import{t as j,S as N}from"./index-klyV6lLg.js";const v={focusDuration:25,shortBreak:5,longBreak:15,cyclesBeforeLongBreak:4},k=[{name:"Ru√≠do Branco",urls:[],color:"from-gray-400/20 to-slate-400/20",category:"generated",noiseType:"white"},{name:"Ru√≠do Rosa",urls:[],color:"from-pink-300/20 to-rose-300/20",category:"generated",noiseType:"pink"},{name:"Ru√≠do Marrom",urls:[],color:"from-amber-700/20 to-orange-800/20",category:"generated",noiseType:"brown"},{name:"Lo-Fi Radio",urls:["https://ice5.somafm.com/groovesalad-128-mp3","https://ice1.somafm.com/groovesalad-128-mp3"],color:"from-amber-400/20 to-orange-400/20",category:"radio"},{name:"Ambient Space",urls:["https://ice5.somafm.com/dronezone-128-mp3","https://ice1.somafm.com/dronezone-128-mp3"],color:"from-indigo-400/20 to-violet-400/20",category:"radio"},{name:"Sil√™ncio",urls:[],color:"from-slate-300/20 to-gray-300/20",category:"silent"}],w={generated:"üéß Gerado (Offline)",radio:"üìª R√°dio (Online)",silent:"üîá Sil√™ncio"},C={white:"Todas as frequ√™ncias - ideal para mascarar distra√ß√µes",pink:"Frequ√™ncias graves suaves - mais relaxante",brown:"Frequ√™ncias muito graves - como ondas do mar"},B="focuszone_tasks",S="focuszone_settings";function E(){const E=e(),[T,D]=a.useState(()=>{try{const e=localStorage.getItem(S);if(e){const a=JSON.parse(e);return{focusDuration:a.focusDuration??v.focusDuration,shortBreak:a.shortBreak??v.shortBreak,longBreak:a.longBreak??v.longBreak,cyclesBeforeLongBreak:a.cyclesBeforeLongBreak??v.cyclesBeforeLongBreak}}}catch{}return v}),[R,P]=a.useState(!1),[M,_]=a.useState(T),[A,$]=a.useState("focus"),[L,F]=a.useState(60*T.focusDuration),[I,O]=a.useState(!1),[q,z]=a.useState(0),K=a.useRef(null),W=a.useRef(null),[J,G]=a.useState(0),[U,Z]=a.useState(0),[H,Q]=a.useState(!1),[V,X]=a.useState(50),[Y,ee]=a.useState("idle"),[ae,se]=a.useState(null),[re,te]=a.useState(0),ne=a.useRef(null),le=a.useRef(null),oe=a.useRef(null),ie=a.useRef(null),ce=a.useCallback((e,a,s)=>{var r;if(!e)return null;const t=a*s,n=null==(r=le.current)?void 0:r.createBuffer(1,t,a);if(!n)return null;const l=n.getChannelData(0);if("white"===e)for(let o=0;o<t;o++)l[o]=2*Math.random()-1;else if("pink"===e){let e=0,a=0,s=0,r=0,n=0,o=0,i=0;for(let c=0;c<t;c++){const t=2*Math.random()-1;e=.99886*e+.0555179*t,a=.99332*a+.0750759*t,s=.969*s+.153852*t,r=.8665*r+.3104856*t,n=.55*n+.5329522*t,o=-.7616*o-.016898*t,l[c]=.11*(e+a+s+r+n+o+i+.5362*t),i=.115926*t}}else if("brown"===e){let e=0;for(let a=0;a<t;a++)e=(e+.02*(2*Math.random()-1))/1.02,l[a]=3.5*e}return n},[]),de=a.useCallback(e=>{if(e)try{le.current||(le.current=new(window.AudioContext||window.webkitAudioContext));const a=le.current;"suspended"===a.state&&a.resume(),oe.current&&(oe.current.stop(),oe.current.disconnect());const s=ce(e,a.sampleRate,10);if(!s)throw new Error("Falha ao criar buffer de √°udio");const r=a.createBufferSource();r.buffer=s,r.loop=!0,ie.current||(ie.current=a.createGain(),ie.current.connect(a.destination)),ie.current.gain.value=V/100,r.connect(ie.current),r.start(),oe.current=r,ee("playing"),se(null)}catch(a){ee("error"),se("Erro ao gerar √°udio. Tente novamente.")}},[ce,V]),ue=a.useCallback(()=>{if(oe.current){try{oe.current.stop(),oe.current.disconnect()}catch{}oe.current=null}},[]);a.useEffect(()=>{ie.current&&(ie.current.gain.value=V/100)},[V]);const[me,xe]=a.useState(()=>{try{const e=localStorage.getItem(B);if(e){const a=JSON.parse(e);if(Array.isArray(a))return a.map(e=>{const a={id:e.id,text:e.text,createdAt:e.createdAt,completedAt:e.completedAt,focusTimeSpent:e.focusTimeSpent??0};return"completed"in e&&!("status"in e)?{...a,status:e.completed?"completed":"pending"}:{...a,status:e.status??"pending"}})}}catch{}return[]}),[ge,pe]=a.useState(0),[he,fe]=a.useState(""),[be,ye]=a.useState(null),[je,Ne]=a.useState(""),[ve,ke]=a.useState(null),we=a.useRef(null),Ce=a.useRef(null);a.useEffect(()=>(Ce.current&&clearTimeout(Ce.current),Ce.current=setTimeout(()=>{try{localStorage.setItem(B,JSON.stringify(me))}catch{}},500),()=>{Ce.current&&clearTimeout(Ce.current)}),[me]);const Be=a.useCallback(e=>{try{localStorage.setItem(S,JSON.stringify(e))}catch{}},[]),Se=()=>{P(!1)},Ee=(e,a)=>{switch(e){case"focus":return 60*a.focusDuration;case"shortBreak":return 60*a.shortBreak;case"longBreak":return 60*a.longBreak}},Te=e=>Ee(e,T),De=a.useCallback(()=>{if(O(!1),W.current&&(W.current.currentTime=0,W.current.play()),"focus"===A){const e=q+1;z(e),e%T.cyclesBeforeLongBreak===0?($("longBreak"),F(60*T.longBreak)):($("shortBreak"),F(60*T.shortBreak))}else $("focus"),F(60*T.focusDuration)},[A,q,T]);a.useEffect(()=>(I?K.current=setInterval(()=>{F(e=>e>1?e-1:(De(),0)),"focus"===A&&(pe(e=>e+1),xe(e=>e.map(e=>"in_progress"===e.status?{...e,focusTimeSpent:e.focusTimeSpent+1}:e)))},1e3):K.current&&(clearInterval(K.current),K.current=null),()=>{K.current&&(clearInterval(K.current),K.current=null)}),[I,De,A]);const Re=e=>{$(e),F(Te(e)),O(!1)},Pe=k[J],Me=a.useCallback(()=>{const e=k[J];return"silent"===e.category||0===e.urls.length?"":e.urls[U]||e.urls[0]},[J,U]),_e=a.useCallback(()=>{const e=U+1;return e<k[J].urls.length&&(Z(e),te(0),se(null),!0)},[J,U]),Ae=a.useCallback(()=>{ue(),G(e=>(e+1)%k.length),Z(0),Q(!1),ee("idle"),se(null),te(0),ne.current&&(ne.current.pause(),ne.current.currentTime=0)},[ue]),$e=a.useCallback(e=>{const a=e.currentTarget.error;let s="Erro desconhecido ao carregar √°udio",r="UNKNOWN";if(a)switch(a.code){case MediaError.MEDIA_ERR_ABORTED:s="Reprodu√ß√£o cancelada",r="ABORTED";break;case MediaError.MEDIA_ERR_NETWORK:s="Erro de rede - verifique sua conex√£o",r="NETWORK";break;case MediaError.MEDIA_ERR_DECODE:s="Formato de √°udio n√£o suportado",r="DECODE";break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:s="Stream indispon√≠vel ou bloqueado",r="SRC_NOT_SUPPORTED"}if(re<3)return te(e=>e+1),void setTimeout(()=>{ne.current&&(ne.current.load(),ne.current.play().catch(()=>{}))},1e3);_e()||(ee("error"),se(s),Q(!1),j({title:"Erro no stream de √°udio",description:`${s}. Tente outra esta√ß√£o.`,variant:"destructive"}))},[re,_e]),Le=a.useCallback(e=>{if("NotAllowedError"===e.name)return ee("blocked"),se("Clique para permitir reprodu√ß√£o"),void j({title:"Reprodu√ß√£o bloqueada",description:"Clique no bot√£o Play para iniciar a m√∫sica. Seu navegador requer intera√ß√£o do usu√°rio."});ee("error"),se(e.message||"Erro ao reproduzir")},[]),Fe=a.useCallback(async()=>{if("silent"===Pe.category)return ue(),ne.current&&ne.current.pause(),Q(e=>!e),void ee(H?"idle":"playing");if("generated"===Pe.category&&Pe.noiseType)H?(ue(),Q(!1),ee("idle")):(ee("loading"),se(null),setTimeout(()=>{de(Pe.noiseType),Q(!0)},100));else if(ne.current)try{H?(ne.current.pause(),ee("idle")):(ee("loading"),se(null),ne.current.readyState<2&&ne.current.load(),await ne.current.play(),ee("playing")),Q(e=>!e)}catch(e){Le(e)}},[H,Le,Pe,de,ue]),Ie=a.useCallback(()=>{if("silent"!==Pe.category){if("generated"===Pe.category&&Pe.noiseType)return ue(),de(Pe.noiseType),void Q(!0);te(0),Z(0),se(null),ee("loading"),ne.current&&(ne.current.load(),ne.current.play().then(()=>{ee("playing"),Q(!0)}).catch(Le))}},[Le,Pe,de,ue]),Oe=a.useCallback(()=>{H&&ee("loading")},[H,Me]),qe=a.useCallback(()=>{H&&ee("playing"),se(null),te(0)},[H]),ze=a.useCallback(()=>{H&&ee("loading")},[H]),Ke=a.useCallback(()=>{ee("playing"),se(null)},[]),We=a.useCallback(()=>{H&&ee("loading")},[H]),Je=a.useCallback(()=>{X(V>0?0:50)},[V]);a.useEffect(()=>{ne.current&&(ne.current.volume=V/100)},[V]),a.useEffect(()=>{if("silent"!==Pe.category){if(ne.current&&H){const e=Me();e&&ne.current.src!==e&&(ne.current.src=e,ne.current.loop=Pe.isLoop||!1,ne.current.load(),ne.current.play().catch(Le))}}else ne.current&&(ne.current.pause(),ne.current.src="")},[J,U,H,Me,Le,Pe]),a.useEffect(()=>{const e=ne.current,a=W.current,s=K.current,r=oe.current,t=le.current;return()=>{if(e&&(e.pause(),e.currentTime=0),a&&(a.pause(),a.currentTime=0),s&&clearInterval(s),r)try{r.stop(),r.disconnect()}catch{}t&&"closed"!==t.state&&t.close()}},[]);const Ge=()=>{var e;const a=he.trim();if(!a)return;const s={id:`task_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,text:a,status:"pending",createdAt:Date.now(),focusTimeSpent:0};xe(e=>[s,...e]),fe(""),null==(e=we.current)||e.focus()},Ue=e=>{ye(e.id),Ne(e.text)},Ze=()=>{if(!be)return;const e=je.trim();e?(xe(a=>a.map(a=>a.id===be?{...a,text:e}:a)),He()):He()},He=()=>{ye(null),Ne("")},Qe=me.filter(e=>"completed"===e.status).length,Ve=me.filter(e=>"in_progress"===e.status).length,Xe=me.filter(e=>"pending"===e.status).length,Ye=me.length,ea=Ye>0?Math.round(Qe/Ye*100):0,aa=me.find(e=>"in_progress"===e.status),sa=Math.floor((q*T.focusDuration*60+ge)/60);a.useEffect(()=>{const e=e=>{var a,s,r;be||"INPUT"===(null==(a=document.activeElement)?void 0:a.tagName)?"Escape"===e.key&&(He(),null==(s=document.activeElement)||s.blur()):("Escape"===e.key&&E(-1)," "===e.key&&(e.preventDefault(),O(e=>!e)),"m"===e.key.toLowerCase()&&Je(),"p"===e.key.toLowerCase()&&Fe(),"n"===e.key.toLowerCase()&&(e.preventDefault(),null==(r=we.current)||r.focus()))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[V,H,be,E,Je,Fe]);const ra=Math.floor(L/60).toString().padStart(2,"0"),ta=(L%60).toString().padStart(2,"0"),na=Te(A),la=(na-L)/na*100,oa=2*Math.PI*90,ia=oa-la/100*oa,ca={focus:{bg:"#6366f1",light:"#e0e7ff"},shortBreak:{bg:"#10b981",light:"#d1fae5"},longBreak:{bg:"#8b5cf6",light:"#ede9fe"}};return s.jsxs(s.Fragment,{children:[s.jsx(N,{title:"Focus Zone - Pomodoro",description:"Timer Pomodoro com musica lo-fi para estudos focados. Gerencie tarefas e mantenha o foco durante suas sessoes de estudo.",canonical:"https://andressamendes.github.io/medprompts/focus-zone",breadcrumbs:[{name:"Home",url:"https://andressamendes.github.io/medprompts/"},{name:"Focus Zone",url:"https://andressamendes.github.io/medprompts/focus-zone"}]}),s.jsxs("main",{id:"main-content",className:"relative min-h-screen overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-950 to-slate-900"}),s.jsx("div",{className:"absolute inset-0 opacity-5",style:{backgroundImage:"\n            linear-gradient(rgba(99, 102, 241, 0.3) 1px, transparent 1px),\n            linear-gradient(90deg, rgba(99, 102, 241, 0.3) 1px, transparent 1px)\n          ",backgroundSize:"50px 50px"}}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/50 via-transparent to-black/60"}),s.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[s.jsxs("header",{id:"main-navigation",className:"w-full p-3 sm:p-6 flex justify-between items-center",role:"banner",children:[s.jsx("div",{children:s.jsx("h1",{className:"text-xl sm:text-3xl font-bold text-white drop-shadow-lg",children:"Focus Zone"})}),s.jsx("div",{className:"hidden sm:flex items-center gap-3",children:s.jsxs("div",{className:"flex items-center gap-4 bg-white/10 backdrop-blur-sm rounded-xl px-4 py-2 border border-white/20",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-lg font-bold text-white",children:q}),s.jsx("p",{className:"text-[10px] text-gray-300 uppercase tracking-wide",children:"Pomodoros"})]}),s.jsx("div",{className:"w-px h-8 bg-white/20"}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-lg font-bold text-white",children:sa}),s.jsx("p",{className:"text-[10px] text-gray-300 uppercase tracking-wide",children:"min focados"})]}),s.jsx("div",{className:"w-px h-8 bg-white/20"}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"flex items-center gap-1 justify-center",children:[s.jsx("span",{className:"text-lg font-bold text-green-400",children:Qe}),Ve>0&&s.jsxs("span",{className:"text-sm font-bold text-indigo-400",children:["+",Ve]}),s.jsxs("span",{className:"text-gray-400 text-sm",children:["/",Ye]})]}),s.jsx("p",{className:"text-[10px] text-gray-300 uppercase tracking-wide",children:Xe>0?`${Xe} pendentes`:"tarefas"})]})]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:()=>{_(T),P(!0)},className:"flex items-center gap-2 px-3 py-2 sm:px-4 sm:py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-all border border-white/20 hover:scale-105","aria-label":"Configura√ß√µes do Pomodoro",children:[s.jsx(r,{className:"w-4 h-4 sm:w-5 sm:h-5"}),s.jsx("span",{className:"text-sm sm:text-base hidden sm:inline",children:"Config"})]}),s.jsxs("button",{onClick:()=>E(-1),className:"flex items-center gap-2 px-3 py-2 sm:px-4 sm:py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-all border border-white/20 hover:scale-105","aria-label":"Sair do Focus Zone",children:[s.jsx(t,{className:"w-4 h-4 sm:w-5 sm:h-5"}),s.jsx("span",{className:"text-sm sm:text-base hidden sm:inline",children:"Sair"})]})]})]}),s.jsx("section",{className:"flex-1 flex items-start justify-center px-3 sm:px-6 pb-6 pt-2","aria-label":"Timer Pomodoro e lista de tarefas",children:s.jsx("div",{className:"w-full max-w-6xl",children:s.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 lg:gap-6",children:[s.jsx("div",{className:"w-full lg:w-[60%]",children:s.jsxs("div",{className:"bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl p-5 sm:p-8 space-y-5 border border-white/20",children:[s.jsxs("div",{className:"flex gap-2 justify-center flex-wrap",role:"group","aria-label":"Selecionar modo do timer",children:[s.jsx("button",{onClick:()=>Re("focus"),"aria-pressed":"focus"===A,className:"px-3 sm:px-4 py-2 rounded-xl font-semibold text-sm transition-all "+("focus"===A?"bg-blue-600 text-white shadow-lg scale-105":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Foco"}),s.jsx("button",{onClick:()=>Re("shortBreak"),"aria-pressed":"shortBreak"===A,className:"px-3 sm:px-4 py-2 rounded-xl font-semibold text-sm transition-all "+("shortBreak"===A?"bg-green-600 text-white shadow-lg scale-105":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Pausa 5min"}),s.jsx("button",{onClick:()=>Re("longBreak"),"aria-pressed":"longBreak"===A,className:"px-3 sm:px-4 py-2 rounded-xl font-semibold text-sm transition-all "+("longBreak"===A?"bg-green-600 text-white shadow-lg scale-105":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Pausa 15min"})]}),s.jsx("div",{className:"text-center",children:s.jsx("p",{className:"text-gray-600 font-medium text-sm",children:{focus:"Foco Profundo",shortBreak:"Pausa Curta",longBreak:"Pausa Longa"}[A]})}),s.jsx("div",{className:"flex flex-col items-center",children:s.jsxs("div",{className:"relative "+(I?"animate-pulse":""),style:{animationDuration:"2s"},children:[I&&s.jsx("div",{className:"absolute inset-0 rounded-full blur-xl opacity-30 animate-pulse",style:{backgroundColor:ca[A].bg,animationDuration:"1.5s"}}),s.jsxs("svg",{width:200,height:200,viewBox:"0 0 200 200",className:"transform -rotate-90 relative z-10",role:"img","aria-hidden":"true",children:[s.jsx("circle",{cx:100,cy:100,r:90,stroke:ca[A].light,strokeWidth:8,fill:"transparent"}),s.jsx("circle",{cx:100,cy:100,r:90,stroke:ca[A].bg,strokeWidth:8,fill:"transparent",strokeDasharray:oa,strokeDashoffset:ia,strokeLinecap:"round",className:"transition-all duration-1000 ease-in-out "+(I?"drop-shadow-lg":""),style:I?{filter:`drop-shadow(0 0 8px ${ca[A].bg})`}:{}})]}),s.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-10",children:[I&&s.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"}),s.jsx("span",{className:"text-[10px] font-medium text-gray-500 uppercase tracking-wider",children:"focus"===A?"Focando":"Pausa"})]}),s.jsxs("p",{role:"timer","aria-live":"polite","aria-atomic":"true",className:"text-5xl sm:text-6xl font-bold tabular-nums",style:{color:ca[A].bg},children:[s.jsx("span",{className:"sr-only",children:`${ra} minutos e ${ta} segundos restantes`}),s.jsxs("span",{"aria-hidden":"true",children:[ra,":",ta]})]}),aa&&"focus"===A&&s.jsxs("p",{className:"mt-1 text-xs text-gray-500 max-w-[150px] truncate text-center",title:aa.text,children:["üìå ",aa.text]})]})]})}),s.jsxs("div",{className:"text-center",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["Ciclos completados: ",s.jsx("span",{className:"font-bold text-blue-600",children:q})]}),s.jsx("div",{className:"flex justify-center gap-1 mt-2",role:"img","aria-label":`Progresso: ${q%4} de 4 ciclos para pausa longa`,children:[...Array(4)].map((e,a)=>s.jsx("div",{"aria-hidden":"true",className:"w-2 h-2 rounded-full transition-all "+(a<q%4?"bg-blue-600 scale-125":"bg-gray-300")},a))})]}),s.jsxs("div",{className:"flex gap-2 sm:gap-3 justify-center",children:[s.jsx("button",{className:(I?"bg-amber-500 hover:bg-amber-600 ring-2 ring-amber-300 animate-pulse":"bg-green-600 hover:bg-green-700")+" text-white font-semibold rounded-xl px-6 py-3 sm:px-8 sm:py-3 transition-all shadow-lg hover:scale-105 flex-1 max-w-[180px] flex items-center justify-center gap-2",onClick:()=>O(!I),"aria-label":I?"Pausar timer":"Iniciar timer",children:I?s.jsxs(s.Fragment,{children:[s.jsx(n,{className:"w-5 h-5"}),s.jsx("span",{children:"Pausar"})]}):s.jsxs(s.Fragment,{children:[s.jsx(l,{className:"w-5 h-5"}),s.jsx("span",{children:"Iniciar"})]})}),s.jsx("button",{className:"bg-gray-100 hover:bg-gray-200 text-blue-700 font-semibold rounded-xl px-5 py-3 sm:px-6 sm:py-3 transition-all shadow-lg hover:scale-105",onClick:()=>{O(!1),F(Te(A)),W.current&&(W.current.pause(),W.current.currentTime=0)},"aria-label":`Resetar timer para ${"focus"===A?T.focusDuration:"shortBreak"===A?T.shortBreak:T.longBreak} minutos`,children:"Reset"})]}),s.jsxs("div",{className:`bg-gradient-to-br ${Pe.color} rounded-2xl shadow-inner p-4 sm:p-5 border border-blue-200/30 backdrop-blur-sm`,children:[s.jsxs("div",{className:"flex flex-col gap-3 items-center",children:[s.jsxs("div",{className:"flex flex-col items-center gap-1 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"px-2 py-0.5 bg-white/50 rounded-full text-gray-700 font-medium",children:w[Pe.category]}),"radio"===Pe.category&&s.jsx("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-700 rounded-full font-medium",children:"Requer conex√£o"})]}),Pe.noiseType&&C[Pe.noiseType]&&s.jsx("span",{className:"text-gray-600 text-center",children:C[Pe.noiseType]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full transition-colors "+("playing"===Y?"bg-green-500 animate-pulse":"loading"===Y?"bg-yellow-500 animate-pulse":"error"===Y||"blocked"===Y?"bg-red-600":"bg-gray-400"),"aria-hidden":"true"}),s.jsx("span",{className:"sr-only",children:"playing"===Y?"Reproduzindo:":"loading"===Y?"Carregando:":"error"===Y?"Erro:":"blocked"===Y?"Bloqueado:":"Pausado:"}),s.jsx("span",{className:"font-semibold text-blue-900 text-sm sm:text-base",children:Pe.name})]}),ae&&s.jsxs("div",{className:"w-full px-3 py-2 bg-red-100 border border-red-300 rounded-lg text-xs text-red-700",role:"alert",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(o,{className:"w-4 h-4 flex-shrink-0","aria-hidden":"true"}),s.jsx("span",{className:"flex-1",children:ae}),s.jsx("button",{onClick:Ie,className:"p-1 hover:bg-red-200 rounded transition-colors","aria-label":"Tentar novamente",children:s.jsx(i,{className:"w-3 h-3"})}),s.jsx("button",{onClick:Ae,className:"p-1 hover:bg-red-200 rounded transition-colors","aria-label":"Pr√≥xima esta√ß√£o",children:s.jsx(c,{className:"w-3 h-3"})})]}),"radio"===Pe.category&&s.jsx("p",{className:"mt-1.5 text-red-600 font-medium",children:"üí° Experimente Ru√≠do Branco/Rosa/Marrom (funcionam 100% offline)"})]}),s.jsxs("div",{className:"flex gap-2 sm:gap-3 w-full items-center",children:[s.jsxs("button",{onClick:Fe,disabled:"loading"===Y&&"silent"!==Pe.category,className:"flex-1 px-4 py-2.5 sm:px-6 sm:py-3 font-bold rounded-xl shadow-lg transition-all flex items-center justify-center gap-2 "+("silent"===Pe.category?H?"bg-gray-600 hover:bg-gray-700 text-white hover:scale-105":"bg-gray-500 hover:bg-gray-600 text-white hover:scale-105":"loading"===Y?"bg-blue-400 cursor-wait":"error"===Y?"bg-red-600 hover:bg-red-700 text-white hover:scale-105":"bg-blue-600 hover:bg-blue-700 text-white hover:scale-105"),"aria-label":"silent"===Pe.category?H?"Desativar modo silencioso":"Ativar modo silencioso":"loading"===Y?"Carregando...":H?"Pausar R√°dio":"Tocar R√°dio",children:["silent"===Pe.category?H?s.jsx(d,{className:"w-4 h-4"}):s.jsx(u,{className:"w-4 h-4"}):"loading"===Y?s.jsx(m,{className:"w-4 h-4 animate-spin"}):H?s.jsx(n,{className:"w-4 h-4"}):s.jsx(l,{className:"w-4 h-4"}),s.jsx("span",{children:"silent"===Pe.category?H?"Sil√™ncio Ativo":"Ativar Sil√™ncio":"loading"===Y?"Carregando...":H?"Pausar":"Play"})]}),s.jsx("button",{onClick:Ae,className:"px-4 py-2.5 sm:px-5 sm:py-3 bg-white hover:bg-gray-50 text-blue-700 font-semibold border-2 border-blue-300 rounded-xl shadow-lg transition-all hover:scale-105","aria-label":"Pr√≥xima Esta√ß√£o",children:"Trocar"})]}),"silent"!==Pe.category&&s.jsxs("div",{className:"flex items-center gap-3 w-full",children:[s.jsx("button",{onClick:Je,className:"p-2 hover:bg-white/20 rounded-lg transition-all","aria-label":0===V?"Ativar som":"Desativar som",children:0===V?s.jsx(d,{className:"w-5 h-5 text-blue-900"}):s.jsx(u,{className:"w-5 h-5 text-blue-900"})}),s.jsx("input",{type:"range",min:"0",max:"100",value:V,onChange:e=>X(Number(e.target.value)),className:"flex-1 h-2 bg-indigo-200 rounded-lg appearance-none cursor-pointer accent-indigo-600","aria-label":"Controle de volume","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":V,"aria-valuetext":`${V} por cento`}),s.jsxs("span",{className:"text-blue-900 font-semibold text-sm min-w-[3ch]",children:[V,"%"]})]}),"silent"===Pe.category&&s.jsx("p",{className:"text-sm text-gray-600 text-center py-2",children:"üßò Modo de foco sem distra√ß√µes sonoras"})]}),s.jsx("audio",{ref:ne,src:"silent"!==Pe.category?Me():"","aria-label":`Stream ${Pe.name}`,className:"sr-only",preload:"none",loop:Pe.isLoop,onEnded:()=>{Pe.isLoop||(Q(!1),ee("idle"))},onError:"silent"!==Pe.category?$e:void 0,onLoadStart:Oe,onCanPlay:qe,onWaiting:ze,onPlaying:Ke,onStalled:We})]}),s.jsxs("div",{className:"pt-3 border-t border-gray-200",children:[s.jsx("p",{className:"text-xs text-gray-500 text-center mb-2",children:"Atalhos de teclado"}),s.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[s.jsxs("kbd",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 border border-gray-300 rounded-md text-xs font-mono shadow-sm",children:[s.jsx("span",{className:"text-gray-500",children:"Space"}),s.jsx("span",{className:"text-gray-700",children:"Timer"})]}),s.jsxs("kbd",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 border border-gray-300 rounded-md text-xs font-mono shadow-sm",children:[s.jsx("span",{className:"text-gray-500",children:"P"}),s.jsx("span",{className:"text-gray-700",children:"M√∫sica"})]}),s.jsxs("kbd",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 border border-gray-300 rounded-md text-xs font-mono shadow-sm",children:[s.jsx("span",{className:"text-gray-500",children:"M"}),s.jsx("span",{className:"text-gray-700",children:"Mute"})]}),s.jsxs("kbd",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 border border-gray-300 rounded-md text-xs font-mono shadow-sm",children:[s.jsx("span",{className:"text-gray-500",children:"N"}),s.jsx("span",{className:"text-gray-700",children:"Tarefa"})]}),s.jsxs("kbd",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 border border-gray-300 rounded-md text-xs font-mono shadow-sm",children:[s.jsx("span",{className:"text-gray-500",children:"Esc"}),s.jsx("span",{className:"text-gray-700",children:"Sair"})]})]})]}),s.jsx("audio",{ref:W,src:"https://actions.google.com/sounds/v1/alarms/alarm_clock.ogg",preload:"auto",className:"sr-only"})]})}),s.jsx("div",{className:"w-full lg:w-[40%]",children:s.jsxs("div",{className:"bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl p-5 sm:p-6 border border-white/20 h-full flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(x,{className:"w-5 h-5 text-indigo-600","aria-hidden":"true"}),s.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"Tarefas"})]}),Ye>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"text-sm font-medium text-gray-600","aria-label":`${Qe} de ${Ye} tarefas conclu√≠das`,children:[s.jsx("span",{className:"text-green-600","aria-hidden":"true",children:Qe}),s.jsx("span",{className:"text-gray-400","aria-hidden":"true",children:"/"}),s.jsx("span",{"aria-hidden":"true",children:Ye})]}),Qe===Ye&&Ye>0&&s.jsx(g,{className:"w-5 h-5 text-yellow-500 animate-bounce","aria-hidden":"true"})]})]}),Ye>0&&s.jsxs("div",{className:"mb-4",children:[s.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",role:"progressbar","aria-valuenow":ea,"aria-valuemin":0,"aria-valuemax":100,"aria-label":`Progresso das tarefas: ${ea}% conclu√≠do`,children:s.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-emerald-500 transition-all duration-500 ease-out",style:{width:`${ea}%`},"aria-hidden":"true"})}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1 text-right","aria-hidden":"true",children:[ea,"% conclu√≠do"]})]}),s.jsxs("div",{className:"flex gap-2 mb-4",children:[s.jsx("label",{htmlFor:"new-task-input",className:"sr-only",children:"Adicionar nova tarefa"}),s.jsx("input",{id:"new-task-input",ref:we,type:"text",value:he,onChange:e=>fe(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),Ge())},placeholder:"Nova tarefa...",className:"flex-1 px-4 py-2.5 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-sm","aria-describedby":"task-input-hint"}),s.jsx("span",{id:"task-input-hint",className:"sr-only",children:"Pressione Enter para adicionar ou use o bot√£o ao lado"}),s.jsx("button",{onClick:Ge,disabled:!he.trim(),className:"px-4 py-2.5 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-xl transition-all hover:scale-105 disabled:hover:scale-100","aria-label":"Adicionar tarefa",children:s.jsx(p,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 min-h-[200px] max-h-[400px] lg:max-h-none",children:0===me.length?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full py-8 text-gray-400",children:[s.jsx(x,{className:"w-12 h-12 mb-3 opacity-50","aria-hidden":"true"}),s.jsx("p",{className:"text-sm",children:"Nenhuma tarefa ainda"}),s.jsx("p",{className:"text-xs mt-1",children:"Pressione N para adicionar"})]}):me.map(e=>s.jsxs("div",{className:`\n                            group flex flex-col gap-2 p-3 rounded-xl border transition-all duration-300\n                            ${"completed"===e.status&&"bg-green-50 border-green-200"}\n                            ${"in_progress"===e.status&&"bg-indigo-50 border-indigo-300 ring-2 ring-indigo-200"}\n                            ${"pending"===e.status&&"bg-white border-gray-200 hover:border-indigo-300 hover:shadow-sm"}\n                            ${ve===e.id?"animate-pulse scale-[1.02]":""}\n                          `,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{onClick:()=>{return a=e.id,void xe(e=>e.map(s=>{if(s.id===a){let r;return"pending"===s.status?(e.some(e=>e.id!==a&&"in_progress"===e.status)&&e.forEach(e=>{"in_progress"===e.status&&e.id!==a&&(e.status="pending")}),r="in_progress"):"in_progress"===s.status?(r="completed",ke(a),setTimeout(()=>ke(null),600)):r="pending",{...s,status:r,completedAt:"completed"===r?Date.now():void 0}}return s}));var a},className:`\n                                flex-shrink-0 w-11 h-11 min-w-[44px] min-h-[44px] rounded-full border-2 flex items-center justify-center transition-all\n                                ${"completed"===e.status&&"bg-green-500 border-green-500 text-white"}\n                                ${"in_progress"===e.status&&"bg-indigo-500 border-indigo-500 text-white animate-pulse"}\n                                ${"pending"===e.status&&"border-gray-300 hover:border-indigo-400 hover:bg-indigo-50"}\n                              `,"aria-label":"pending"===e.status?"Iniciar tarefa":"in_progress"===e.status?"Concluir tarefa":"Reabrir tarefa",title:"pending"===e.status?"Clique para iniciar":"in_progress"===e.status?"Clique para concluir":"Clique para reabrir",children:["completed"===e.status&&s.jsx(h,{className:"w-5 h-5"}),"in_progress"===e.status&&s.jsx(l,{className:"w-4 h-4"})]}),be===e.id?s.jsx("input",{type:"text",value:je,onChange:e=>Ne(e.target.value),onKeyDown:e=>{"Enter"===e.key&&Ze(),"Escape"===e.key&&He()},onBlur:Ze,autoFocus:!0,className:"flex-1 px-2 py-1 border border-indigo-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm"}):s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("span",{onDoubleClick:()=>Ue(e),className:`\n                                    block text-sm transition-all cursor-pointer\n                                    ${"completed"===e.status?"text-gray-500 line-through":""}\n                                    ${"in_progress"===e.status?"text-indigo-800 font-medium":""}\n                                    ${"pending"===e.status?"text-gray-800":""}\n                                  `,children:e.text}),"in_progress"===e.status&&s.jsxs("span",{className:"inline-flex items-center gap-1 mt-1 text-[10px] font-medium text-indigo-600 uppercase tracking-wide",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-pulse"}),"Em andamento"]})]}),!be&&s.jsxs("div",{className:"flex items-center gap-0.5 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity",children:["pending"===e.status&&s.jsx("button",{onClick:()=>{return a=e.id,void xe(e=>e.map(e=>e.id===a&&"completed"!==e.status?(ke(a),setTimeout(()=>ke(null),600),{...e,status:"completed",completedAt:Date.now()}):e));var a},className:"min-w-[44px] min-h-[44px] p-2.5 hover:bg-green-100 rounded-lg transition-colors flex items-center justify-center","aria-label":"Concluir tarefa",title:"Concluir direto",children:s.jsx(h,{className:"w-5 h-5 text-green-600"})}),s.jsx("button",{onClick:()=>Ue(e),className:"min-w-[44px] min-h-[44px] p-2.5 hover:bg-gray-100 rounded-lg transition-colors flex items-center justify-center","aria-label":"Editar tarefa",children:s.jsx(f,{className:"w-5 h-5 text-gray-500"})}),s.jsx("button",{onClick:()=>{return a=e.id,void xe(e=>e.filter(e=>e.id!==a));var a},className:"min-w-[44px] min-h-[44px] p-2.5 hover:bg-red-100 rounded-lg transition-colors flex items-center justify-center","aria-label":"Excluir tarefa",children:s.jsx(b,{className:"w-5 h-5 text-red-500"})})]})]}),"pending"!==e.status&&e.focusTimeSpent>0&&s.jsx("div",{className:"ml-10",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"flex-1 h-1 bg-gray-200 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full transition-all "+("completed"===e.status?"bg-green-400":"bg-indigo-400"),style:{width:`${Math.min(e.focusTimeSpent/(60*T.focusDuration)*100,100)}%`}})}),s.jsxs("span",{className:"text-[10px] text-gray-500 tabular-nums min-w-[40px]",children:[Math.floor(e.focusTimeSpent/60),"min"]})]})})]},e.id))}),me.length>0&&s.jsxs("div",{className:"mt-4 pt-3 border-t border-gray-200",children:[s.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3 text-[10px] text-gray-500",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"w-3 h-3 rounded-full border-2 border-gray-300"}),"Pendente"]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"w-3 h-3 rounded-full bg-indigo-500"}),"Em andamento"]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"w-3 h-3 rounded-full bg-green-500"}),"Conclu√≠da"]})]}),s.jsx("p",{className:"text-[10px] text-gray-400 text-center mt-2",children:"Clique no c√≠rculo para avan√ßar estado ‚Ä¢ Duplo clique no texto para editar"})]})]})})]})})})]}),Qe===Ye&&Ye>0&&Qe>0&&s.jsxs("div",{className:"fixed inset-0 pointer-events-none z-50",role:"status","aria-live":"polite",children:[s.jsx("span",{className:"sr-only",children:"Parab√©ns! Todas as tarefas foram conclu√≠das!"}),s.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:s.jsx("div",{className:"text-6xl animate-bounce","aria-hidden":"true",children:"üéâ"})})]}),R&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:Se,role:"dialog","aria-modal":"true","aria-labelledby":"settings-title",children:s.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-md mx-4 p-6 space-y-6 animate-in zoom-in-95 duration-200",onClick:e=>e.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h2",{id:"settings-title",className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[s.jsx(r,{className:"w-5 h-5 text-indigo-600","aria-hidden":"true"}),"Configura√ß√µes do Pomodoro"]}),s.jsx("button",{onClick:Se,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors","aria-label":"Fechar configura√ß√µes",children:s.jsx(t,{className:"w-5 h-5 text-gray-500"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"focus-duration",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Dura√ß√£o do Foco (minutos)"}),s.jsx("input",{id:"focus-duration",type:"number",min:"1",max:"120",value:M.focusDuration,onChange:e=>_(a=>({...a,focusDuration:parseInt(e.target.value)||1})),className:"w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-800 dark:text-white","aria-describedby":"focus-hint"}),s.jsx("p",{id:"focus-hint",className:"text-xs text-gray-500 dark:text-gray-400",children:"T√©cnica Pomodoro recomenda 25 minutos (1-120 min)"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"short-break",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Pausa Curta (minutos)"}),s.jsx("input",{id:"short-break",type:"number",min:"1",max:"60",value:M.shortBreak,onChange:e=>_(a=>({...a,shortBreak:parseInt(e.target.value)||1})),className:"w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-800 dark:text-white","aria-describedby":"short-break-hint"}),s.jsx("p",{id:"short-break-hint",className:"text-xs text-gray-500 dark:text-gray-400",children:"Recomendado: 5 minutos (1-60 min)"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"long-break",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Pausa Longa (minutos)"}),s.jsx("input",{id:"long-break",type:"number",min:"1",max:"60",value:M.longBreak,onChange:e=>_(a=>({...a,longBreak:parseInt(e.target.value)||1})),className:"w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-800 dark:text-white","aria-describedby":"long-break-hint"}),s.jsx("p",{id:"long-break-hint",className:"text-xs text-gray-500 dark:text-gray-400",children:"Recomendado: 15 minutos (1-60 min)"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"cycles",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Ciclos antes da pausa longa"}),s.jsx("input",{id:"cycles",type:"number",min:"1",max:"10",value:M.cyclesBeforeLongBreak,onChange:e=>_(a=>({...a,cyclesBeforeLongBreak:parseInt(e.target.value)||1})),className:"w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-800 dark:text-white","aria-describedby":"cycles-hint"}),s.jsx("p",{id:"cycles-hint",className:"text-xs text-gray-500 dark:text-gray-400",children:"Recomendado: 4 ciclos (1-10 ciclos)"})]})]}),s.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/30 rounded-xl p-4 space-y-2",children:[s.jsx("p",{className:"text-sm font-medium text-indigo-700 dark:text-indigo-300",children:"Resumo do ciclo:"}),s.jsxs("p",{className:"text-xs text-indigo-600 dark:text-indigo-400",children:[M.cyclesBeforeLongBreak,"√ó (",M.focusDuration," min foco + ",M.shortBreak," min pausa) + ",M.longBreak," min pausa longa"]}),s.jsxs("p",{className:"text-xs text-indigo-500 dark:text-indigo-500",children:["Total por bloco: ",(M.focusDuration+M.shortBreak)*M.cyclesBeforeLongBreak+M.longBreak," min"]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-2",children:[s.jsxs("button",{onClick:()=>{_(v)},className:"flex items-center gap-2 px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors","aria-label":"Restaurar configura√ß√µes padr√£o",children:[s.jsx(y,{className:"w-4 h-4"}),"Padr√£o"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:Se,className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:()=>{const e={focusDuration:Math.max(1,Math.min(120,M.focusDuration)),shortBreak:Math.max(1,Math.min(60,M.shortBreak)),longBreak:Math.max(1,Math.min(60,M.longBreak)),cyclesBeforeLongBreak:Math.max(1,Math.min(10,M.cyclesBeforeLongBreak))};D(e),Be(e),I||F(Ee(A,e)),P(!1),j({title:"Configura√ß√µes salvas",description:"As novas dura√ß√µes ser√£o aplicadas no pr√≥ximo ciclo."})},className:"px-4 py-2 text-sm bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors font-medium",children:"Salvar"})]})]})]})})]})]})}export{E as default};
