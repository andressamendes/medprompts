import{Q as p,t as m,j as e,A as _,B as x,T as V,a as z,b as L,I as $,C as k,c as H,d as K,f as B,e as q}from"./index-Ck-wsLWv.js";import{r as c,L as Q}from"./react-vendor-Bq2irNGE.js";import{B as C}from"./Combination-CEjLoLCz.js";import{T as U,a as N,b as w,c as y}from"./tooltip-Bx4MSoyq.js";import{S as W,a as Y,b as Z,c as J,d as X}from"./select-CURS7JyN.js";import{s as ee,t as se,c as b,k as T,u as A,v as ae,g as te,E as re}from"./ui-vendor-DQkSeNuE.js";const g="https://www.googleapis.com/books/v1/volumes",f="AIzaSyAFVDw1fLY230qIWKLyoxd66WomjavaQD8",ie=["Guyton Fisiologia","Tratado de Fisiologia Médica Guyton","Sobotta Atlas de Anatomia Humana","Netter Atlas de Anatomia Humana","Gray Anatomia","Harrison Medicina Interna","Robbins Patologia","Goodman Gilman Farmacologia","Nelson Tratado de Pediatria","Williams Obstetrícia","Sabiston Tratado de Cirurgia","Cecil Medicina"];class oe{async search(r,a=20){try{const t=await p.get(g,{params:{q:r,maxResults:a,key:f,orderBy:"relevance"}});return t.data.items?t.data.items.map(i=>this.formatBook(i)):[]}catch(t){const i=typeof t=="object"&&t&&"message"in t?String(t.message):"Erro ao buscar livros";throw new Error(i)}}async searchMedical(r,a=20){try{if(r==="medicina geral")return await this.getPopularBooks();const i=`${r} ${["medicina","medical"].join(" OR ")}`,d=await p.get(g,{params:{q:i,maxResults:a,key:f,orderBy:"relevance"}});return d.data.items?d.data.items.map(n=>this.formatBook(n)):[]}catch(t){const i=typeof t=="object"&&t&&"message"in t?String(t.message):"Erro ao buscar livros médicos";throw new Error(i)}}async getPopularBooks(){try{const r=[];for(const a of ie.slice(0,6))try{const t=await p.get(g,{params:{q:a,maxResults:1,key:f,orderBy:"relevance"}});t.data.items&&t.data.items.length>0&&r.push(this.formatBook(t.data.items[0]))}catch(t){console.error(`Erro ao buscar ${a}:`,t)}return r}catch(r){const a=typeof r=="object"&&r&&"message"in r?String(r.message):"Erro ao buscar livros populares";throw new Error(a)}}async getById(r){try{const a=await p.get(`${g}/${r}`,{params:{key:f}});return this.formatBook(a.data)}catch(a){const t=typeof a=="object"&&a&&"message"in a?String(a.message):"Erro ao buscar detalhes do livro";throw new Error(t)}}formatBook(r){var t,i,d,n;const a=r.volumeInfo;return{id:r.id,title:a.title||"Título não disponível",authors:a.authors||["Autor desconhecido"],description:a.description||"Descrição não disponível",thumbnail:((i=(t=a.imageLinks)==null?void 0:t.thumbnail)==null?void 0:i.replace("http:","https:"))||((n=(d=a.imageLinks)==null?void 0:d.smallThumbnail)==null?void 0:n.replace("http:","https:"))||"",categories:a.categories||[],publishedDate:a.publishedDate||"",pageCount:a.pageCount||0,language:a.language||"pt",previewLink:a.previewLink||"",infoLink:a.infoLink||"",isFavorite:!1}}}const E=new oe;function he(){const[v,r]=c.useState([]),[a,t]=c.useState([]),[i,d]=c.useState(""),[n,F]=c.useState("medicina geral"),[j,D]=c.useState("all"),[M,h]=c.useState(!1),[u,I]=c.useState(new Set),P=["medicina geral","anatomia","fisiologia","farmacologia","clínica médica","cirurgia","pediatria","cardiologia","neurologia","patologia"];c.useEffect(()=>{n&&O(n)},[n]),c.useEffect(()=>{let s=v;if(j==="favorites"&&(s=s.filter(o=>u.has(o.id))),i){const o=i.toLowerCase();s=s.filter(l=>l.title.toLowerCase().includes(o)||l.authors.some(R=>R.toLowerCase().includes(o))||l.description.toLowerCase().includes(o))}t(s)},[v,j,i,u]);const O=async s=>{h(!0);try{const o=await E.searchMedical(s,30);r(o),t(o)}catch(o){const l=typeof o=="object"&&o&&"message"in o?String(o.message):"Erro ao carregar livros";m({title:"Erro ao carregar livros",description:l,variant:"destructive"})}finally{h(!1)}},S=async()=>{if(!i.trim()){m({title:"Termo de busca vazio",description:"Digite algo para buscar",variant:"destructive"});return}h(!0);try{const s=await E.search(i,30);r(s),t(s)}catch(s){const o=typeof s=="object"&&s&&"message"in s?String(s.message):"Erro ao buscar livros";m({title:"Erro ao buscar",description:o,variant:"destructive"})}finally{h(!1)}},G=s=>{I(o=>{const l=new Set(o);return l.has(s)?(l.delete(s),m({title:"Removido dos favoritos",description:"Livro removido da sua lista"})):(l.add(s),m({title:"Adicionado aos favoritos",description:"Livro salvo na sua lista"})),l})};return e.jsx(U,{children:e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(_,{}),e.jsxs("section",{className:"relative overflow-hidden bg-gradient-to-br from-indigo-50 via-white to-purple-50 dark:from-gray-950 dark:via-gray-900 dark:to-indigo-950 py-16 sm:py-24",children:[e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsx(Q,{to:"/tools",children:e.jsxs(x,{variant:"ghost",className:"mb-6 gap-2 hover:gap-3 transition-all",children:[e.jsx(ee,{className:"h-4 w-4"}),"Voltar para Ferramentas"]})}),e.jsxs("div",{className:"text-center max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 text-sm font-medium mb-4",children:[e.jsx(se,{className:"h-4 w-4"}),e.jsx("span",{children:"Livros Médicos Mais Populares do Brasil"})]}),e.jsx("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-bold tracking-tight",children:e.jsx("span",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:"Biblioteca Médica"})}),e.jsx("p",{className:"text-lg sm:text-xl text-muted-foreground max-w-2xl mx-auto",children:"Guyton, Netter, Sobotta, Harrison e muito mais. Acesse os principais livros de referência."}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-muted-foreground",children:[e.jsx(b,{className:"h-5 w-5"}),e.jsxs("span",{children:[a.length," livros disponíveis"]})]})]})]}),e.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-purple-300 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),e.jsx("div",{className:"absolute top-0 right-1/4 w-96 h-96 bg-indigo-300 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"})]}),e.jsx("main",{className:"container mx-auto px-4 py-8 sm:py-12",children:e.jsxs("div",{className:"space-y-8",children:[e.jsx(V,{value:j,onValueChange:D,className:"w-full",children:e.jsxs(z,{className:"grid w-full max-w-md mx-auto grid-cols-2 h-auto",children:[e.jsxs(L,{value:"all",className:"gap-2",children:[e.jsx(b,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Todos os Livros"}),e.jsx("span",{className:"sm:hidden",children:"Todos"})]}),e.jsxs(L,{value:"favorites",className:"gap-2",children:[e.jsx(T,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Meus Favoritos"}),e.jsx("span",{className:"sm:hidden",children:"Favoritos"})]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"flex-1 flex gap-2",children:[e.jsx($,{placeholder:"Buscar por título, autor ou descrição...",value:i,onChange:s=>d(s.target.value),onKeyDown:s=>s.key==="Enter"&&S(),className:"flex-1"}),e.jsxs(x,{onClick:S,className:"gap-2",children:[e.jsx(A,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Buscar"})]})]}),e.jsxs(W,{value:n,onValueChange:F,children:[e.jsxs(Y,{className:"w-full sm:w-[200px]",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),e.jsx(Z,{})]}),e.jsx(J,{children:P.map(s=>e.jsx(X,{value:s,children:s.charAt(0).toUpperCase()+s.slice(1)},s))})]})]}),M?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 sm:py-24 gap-4",children:[e.jsx(te,{className:"h-12 w-12 animate-spin text-indigo-600"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Buscando livros populares..."})]}):e.jsx(e.Fragment,{children:a.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:a.map(s=>e.jsxs(k,{className:"group flex flex-col hover:shadow-xl transition-all duration-300 hover:-translate-y-1 border-2 hover:border-indigo-200 dark:hover:border-indigo-800",children:[e.jsx(H,{className:"pb-3",children:e.jsxs("div",{className:"flex gap-3",children:[s.thumbnail&&e.jsx("img",{src:s.thumbnail,alt:s.title,className:"w-20 h-28 object-cover rounded-lg shadow-md"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsx(K,{className:"text-sm leading-tight line-clamp-3",children:s.title}),e.jsxs(N,{children:[e.jsx(w,{children:e.jsx(x,{variant:"ghost",size:"icon",className:"shrink-0 h-7 w-7",onClick:()=>G(s.id),children:e.jsx(T,{className:`h-4 w-4 transition-all ${u.has(s.id)?"fill-yellow-500 text-yellow-500 scale-110":"group-hover:text-yellow-500/50"}`})})}),e.jsx(y,{children:u.has(s.id)?"Remover dos favoritos":"Adicionar aos favoritos"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:s.authors.join(", ")})]})]})}),e.jsxs(B,{className:"flex-1 flex flex-col gap-3 pt-0",children:[e.jsx(q,{className:"text-xs line-clamp-3",children:s.description}),e.jsxs("div",{className:"flex flex-wrap gap-1.5 text-xs text-muted-foreground",children:[s.publishedDate&&e.jsx(C,{variant:"outline",className:"text-xs",children:s.publishedDate.split("-")[0]}),s.pageCount>0&&e.jsxs(C,{variant:"outline",className:"text-xs",children:[s.pageCount," pág."]})]}),e.jsxs("div",{className:"flex gap-2 mt-auto",children:[s.previewLink&&e.jsxs(N,{children:[e.jsx(w,{className:"flex-1",children:e.jsxs(x,{variant:"outline",size:"sm",className:"w-full gap-2",onClick:()=>window.open(s.previewLink,"_blank"),children:[e.jsx(b,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs",children:"Prévia"})]})}),e.jsx(y,{children:"Ver prévia do livro"})]}),s.infoLink&&e.jsxs(N,{children:[e.jsx(w,{className:"flex-1",children:e.jsxs(x,{variant:"default",size:"sm",className:"w-full gap-2",onClick:()=>window.open(s.infoLink,"_blank"),children:[e.jsx(re,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs",children:"Detalhes"})]})}),e.jsx(y,{children:"Ver mais informações"})]})]})]})]},s.id))}):e.jsx(k,{className:"border-2 border-dashed",children:e.jsxs(B,{className:"flex flex-col items-center justify-center py-12 sm:py-16 gap-4",children:[e.jsx("div",{className:"rounded-full bg-muted p-4",children:e.jsx(A,{className:"h-8 w-8 text-muted-foreground"})}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("p",{className:"font-medium",children:"Nenhum livro encontrado"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Tente ajustar os filtros ou fazer uma nova busca"})]})]})})})]})}),e.jsx("footer",{className:"border-t mt-16",children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"MedPrompts © 2026 • Desenvolvido para estudantes de Medicina"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Desenvolvido por ",e.jsx("span",{className:"font-semibold",children:"Andressa Mendes"})," • Estudante de Medicina"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Afya - Guanambi/BA"})]})})})]})})}export{he as default};
