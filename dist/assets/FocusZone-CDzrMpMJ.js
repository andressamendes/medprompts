import{h as e,r as a,j as t,aA as s,aB as r,X as n,aC as l,aD as o,aE as i,aF as c,o as d,aG as x,a0 as m,aH as u,n as g,aI as h,aJ as p}from"./vendor-DfZkFDW1.js";import{S as f,t as b}from"./index-DWcG5Jsn.js";const y={focusDuration:25,shortBreak:5,longBreak:15,cyclesBeforeLongBreak:4},j=[{name:"ClÃ¡ssico",emoji:"ðŸ…",settings:{focusDuration:25,shortBreak:5,longBreak:15,cyclesBeforeLongBreak:4}},{name:"Estudo Intenso",emoji:"ðŸ”¥",settings:{focusDuration:50,shortBreak:10,longBreak:30,cyclesBeforeLongBreak:3}},{name:"Sprints Curtos",emoji:"âš¡",settings:{focusDuration:15,shortBreak:3,longBreak:10,cyclesBeforeLongBreak:4}}],N="focuszone_tasks",k="focuszone_settings",v="focuszone_daily_goal",w="focuszone_auto_transition",S="focuszone_daily_stats",B="focuszone_streak",C=()=>(new Date).toISOString().split("T")[0];function D(){const D=e(),[P,I]=a.useState(()=>{try{const e=localStorage.getItem(k);if(e){const a=JSON.parse(e);return{focusDuration:a.focusDuration??y.focusDuration,shortBreak:a.shortBreak??y.shortBreak,longBreak:a.longBreak??y.longBreak,cyclesBeforeLongBreak:a.cyclesBeforeLongBreak??y.cyclesBeforeLongBreak}}}catch{}return y}),[M,E]=a.useState(!1),[A,T]=a.useState(P),[$,F]=a.useState("focus"),[_,L]=a.useState(60*P.focusDuration),[z,R]=a.useState(!1),[O,J]=a.useState(0),q=a.useRef(null),[Z,H]=a.useState(()=>{try{const e=localStorage.getItem(N);if(e){const a=JSON.parse(e);if(Array.isArray(a))return a.map(e=>{const a={id:e.id,text:e.text,createdAt:e.createdAt,completedAt:e.completedAt,focusTimeSpent:e.focusTimeSpent??0};return"completed"in e&&!("status"in e)?{...a,status:e.completed?"completed":"pending"}:{...a,status:e.status??"pending"}})}}catch{}return[]}),[G,K]=a.useState(0),[V,W]=a.useState(""),[U,Q]=a.useState(null),[X,Y]=a.useState(""),[ee,ae]=a.useState(null),te=a.useRef(null),se=a.useRef(Date.now()),[re,ne]=a.useState(()=>{try{const e=localStorage.getItem(v);return e&&parseInt(e)||8}catch{return 8}}),[le,oe]=a.useState(()=>{try{return"true"===localStorage.getItem(w)}catch{return!1}}),[ie,ce]=a.useState(()=>{try{const e=localStorage.getItem(S);if(e){const a=JSON.parse(e);if(a.date===C())return a}}catch{}return{date:C(),pomodorosCompleted:0,focusMinutes:0,tasksCompleted:0}}),[de,xe]=a.useState(()=>{try{const e=localStorage.getItem(B);if(e){const a=JSON.parse(e),t=new Date;t.setDate(t.getDate()-1);const s=t.toISOString().split("T")[0],r=C();return a.lastActiveDate===r||a.lastActiveDate===s?a:{currentStreak:0,lastActiveDate:a.lastActiveDate,longestStreak:a.longestStreak||0}}}catch{}return{currentStreak:0,lastActiveDate:"",longestStreak:0}}),[me,ue]=a.useState(null),[ge,he]=a.useState(!1),pe=a.useRef(null);a.useEffect(()=>(pe.current&&clearTimeout(pe.current),pe.current=setTimeout(()=>{try{localStorage.setItem(N,JSON.stringify(Z))}catch{}},500),()=>{pe.current&&clearTimeout(pe.current)}),[Z]);const fe=a.useCallback(e=>{try{localStorage.setItem(k,JSON.stringify(e))}catch{}},[]);a.useEffect(()=>{try{localStorage.setItem(S,JSON.stringify(ie))}catch{}},[ie]),a.useEffect(()=>{try{localStorage.setItem(B,JSON.stringify(de))}catch{}},[de]),a.useEffect(()=>{try{localStorage.setItem(v,String(re))}catch{}},[re]),a.useEffect(()=>{try{localStorage.setItem(w,String(le))}catch{}},[le]);const be=a.useCallback(e=>{e>=re&&xe(e=>{const a=C();if(e.lastActiveDate===a)return e;const t=new Date;t.setDate(t.getDate()-1);const s=t.toISOString().split("T")[0],r=e.lastActiveDate===s?e.currentStreak+1:1;return{currentStreak:r,lastActiveDate:a,longestStreak:Math.max(e.longestStreak,r)}})},[re]),ye=()=>{E(!1)},je=(e,a)=>{switch(e){case"focus":return 60*a.focusDuration;case"shortBreak":return 60*a.shortBreak;case"longBreak":return 60*a.longBreak}},Ne=e=>je(e,P),ke=a.useCallback((e,a)=>{"Notification"in window&&"granted"===Notification.permission&&new Notification(e,{body:a,icon:"/medprompts/favicon.svg",tag:"focus-zone-timer"})},[]),ve=a.useCallback(()=>{"Notification"in window&&"default"===Notification.permission&&Notification.requestPermission()},[]),we=a.useCallback(()=>{if(R(!1),"focus"===$?ke("Pomodoro concluÃ­do!","Hora de fazer uma pausa. VocÃª merece!"):ke("Pausa encerrada!","Hora de voltar ao foco. Vamos lÃ¡!"),"focus"===$){const e=O+1;J(e),ce(e=>{const a={...e,date:C(),pomodorosCompleted:e.pomodorosCompleted+1,focusMinutes:e.focusMinutes+P.focusDuration};return be(a.pomodorosCompleted),a}),e%P.cyclesBeforeLongBreak===0?(F("longBreak"),L(60*P.longBreak)):(F("shortBreak"),L(60*P.shortBreak))}else F("focus"),L(60*P.focusDuration);le&&ue(5)},[$,O,P,ke,le,be]);a.useEffect(()=>(z?q.current=setInterval(()=>{L(e=>e>1?e-1:(we(),0)),"focus"===$&&(K(e=>e+1),H(e=>e.map(e=>"in_progress"===e.status?{...e,focusTimeSpent:e.focusTimeSpent+1}:e)))},1e3):q.current&&(clearInterval(q.current),q.current=null),()=>{q.current&&(clearInterval(q.current),q.current=null)}),[z,we,$]),a.useEffect(()=>{if(null===me)return;if(me<=0)return ue(null),void R(!0);const e=setTimeout(()=>{ue(e=>null!==e?e-1:null)},1e3);return()=>clearTimeout(e)},[me]);const Se=e=>{F(e),L(Ne(e)),R(!1),ue(null)};a.useEffect(()=>{const e=q.current;return()=>{e&&clearInterval(e)}},[]);const Be=()=>{var e;const a=V.trim();if(!a)return;const t={id:`task_${Date.now()}_${Math.random().toString(36).slice(2,9)}`,text:a,status:"pending",createdAt:Date.now(),focusTimeSpent:0};H(e=>[t,...e]),W(""),null==(e=te.current)||e.focus()},Ce=e=>{Q(e.id),Y(e.text)},De=()=>{if(!U)return;const e=X.trim();e?(H(a=>a.map(a=>a.id===U?{...a,text:e}:a)),Pe()):Pe()},Pe=()=>{Q(null),Y("")},Ie=Z.filter(e=>"completed"===e.status).length,Me=Z.filter(e=>"in_progress"===e.status).length,Ee=Z.length,Ae=Ee>0?Math.round(Ie/Ee*100):0,Te=Z.find(e=>"in_progress"===e.status),$e=Math.floor((O*P.focusDuration*60+G)/60);a.useEffect(()=>{const e=e=>{var a,t,s;U||"INPUT"===(null==(a=document.activeElement)?void 0:a.tagName)?"Escape"===e.key&&(Pe(),null==(t=document.activeElement)||t.blur()):("Escape"===e.key&&(ge?he(!1):M?ye():D(-1))," "!==e.key||M||ge||(e.preventDefault(),ue(null),R(e=>!e)),"n"!==e.key.toLowerCase()||M||ge||(e.preventDefault(),null==(s=te.current)||s.focus()))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[U,D,ge,M]),a.useEffect(()=>{const e=Math.floor(_/60).toString().padStart(2,"0"),a=(_%60).toString().padStart(2,"0"),t="focus"===$?"Foco":"shortBreak"===$?"Pausa":"Pausa Longa";return document.title=z?`${e}:${a} - ${t} | Focus Zone`:"Focus Zone - Pomodoro | MedPrompts",()=>{document.title="MedPrompts"}},[_,$,z]);const Fe=Math.floor(_/60).toString().padStart(2,"0"),_e=(_%60).toString().padStart(2,"0"),Le=Ne($),ze=(Le-_)/Le*100,Re=2*Math.PI*90,Oe=Re-ze/100*Re,Je={focus:{bg:"#6366f1",light:"#e0e7ff"},shortBreak:{bg:"#10b981",light:"#d1fae5"},longBreak:{bg:"#8b5cf6",light:"#ede9fe"}};return t.jsxs(t.Fragment,{children:[t.jsx(f,{title:"Focus Zone - Pomodoro",description:"Timer Pomodoro para estudos focados. Gerencie tarefas e mantenha o foco durante suas sessoes de estudo.",canonical:"https://andressamendes.github.io/medprompts/focus-zone",breadcrumbs:[{name:"Home",url:"https://andressamendes.github.io/medprompts/"},{name:"Focus Zone",url:"https://andressamendes.github.io/medprompts/focus-zone"}]}),t.jsxs("main",{id:"main-content",className:"relative min-h-screen overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900 via-blue-950 to-slate-900"}),t.jsx("div",{className:"absolute inset-0 opacity-5",style:{backgroundImage:"\n            linear-gradient(rgba(99, 102, 241, 0.3) 1px, transparent 1px),\n            linear-gradient(90deg, rgba(99, 102, 241, 0.3) 1px, transparent 1px)\n          ",backgroundSize:"50px 50px"}}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/50 via-transparent to-black/60"}),t.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[t.jsxs("header",{id:"main-navigation",className:"w-full p-3 sm:p-6 flex justify-between items-center",role:"banner",children:[t.jsx("div",{children:t.jsx("h1",{className:"text-xl sm:text-3xl font-bold text-white drop-shadow-lg",children:"Focus Zone"})}),t.jsx("div",{className:"hidden sm:flex items-center gap-3",children:t.jsxs("div",{className:"flex items-center gap-4 bg-white/10 backdrop-blur-sm rounded-xl px-4 py-2 border border-white/20",children:[t.jsxs("div",{className:"text-center",children:[t.jsxs("p",{className:"text-lg font-bold text-white",children:[ie.pomodorosCompleted,t.jsxs("span",{className:"text-sm text-gray-400",children:["/",re]})]}),t.jsx("p",{className:"text-[10px] text-gray-300 uppercase tracking-wide",children:"Meta diÃ¡ria"})]}),t.jsx("div",{className:"w-px h-8 bg-white/20"}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-lg font-bold text-white",children:$e}),t.jsx("p",{className:"text-[10px] text-gray-300 uppercase tracking-wide",children:"min focados"})]}),t.jsx("div",{className:"w-px h-8 bg-white/20"}),t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"flex items-center gap-1 justify-center",children:[t.jsx("span",{className:"text-lg font-bold text-green-400",children:Ie}),Me>0&&t.jsxs("span",{className:"text-sm font-bold text-indigo-400",children:["+",Me]}),t.jsxs("span",{className:"text-gray-400 text-sm",children:["/",Ee]})]}),t.jsx("p",{className:"text-[10px] text-gray-300 uppercase tracking-wide",children:"tarefas"})]}),de.currentStreak>0&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-px h-8 bg-white/20"}),t.jsxs("div",{className:"text-center",children:[t.jsxs("p",{className:"text-lg font-bold text-orange-400",children:[de.currentStreak,t.jsx(s,{className:"w-4 h-4 inline text-orange-400"})]}),t.jsx("p",{className:"text-[10px] text-gray-300 uppercase tracking-wide",children:"Streak"})]})]})]})}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{onClick:()=>{T(P),E(!0)},className:"flex items-center gap-2 px-3 py-2 sm:px-4 sm:py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-all border border-white/20 hover:scale-105","aria-label":"ConfiguraÃ§Ãµes do Pomodoro",children:[t.jsx(r,{className:"w-4 h-4 sm:w-5 sm:h-5"}),t.jsx("span",{className:"text-sm sm:text-base hidden sm:inline",children:"Config"})]}),t.jsxs("button",{onClick:()=>{O>0||G>0?he(!0):D(-1)},className:"flex items-center gap-2 px-3 py-2 sm:px-4 sm:py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-all border border-white/20 hover:scale-105","aria-label":"Sair do Focus Zone",children:[t.jsx(n,{className:"w-4 h-4 sm:w-5 sm:h-5"}),t.jsx("span",{className:"text-sm sm:text-base hidden sm:inline",children:"Sair"})]})]})]}),t.jsx("section",{className:"flex-1 flex items-start justify-center px-3 sm:px-6 pb-6 pt-2","aria-label":"Timer Pomodoro e lista de tarefas",children:t.jsx("div",{className:"w-full max-w-6xl",children:t.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 lg:gap-6",children:[t.jsx("div",{className:"w-full lg:w-[60%]",children:t.jsxs("div",{className:"bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl p-5 sm:p-8 space-y-5 border border-white/20",children:[t.jsxs("div",{className:"flex gap-2 justify-center flex-wrap",role:"group","aria-label":"Selecionar modo do timer",children:[t.jsx("button",{onClick:()=>Se("focus"),"aria-pressed":"focus"===$,className:"px-3 sm:px-4 py-2 rounded-xl font-semibold text-sm transition-all "+("focus"===$?"bg-blue-600 text-white shadow-lg scale-105":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Foco"}),t.jsx("button",{onClick:()=>Se("shortBreak"),"aria-pressed":"shortBreak"===$,className:"px-3 sm:px-4 py-2 rounded-xl font-semibold text-sm transition-all "+("shortBreak"===$?"bg-green-600 text-white shadow-lg scale-105":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Pausa 5min"}),t.jsx("button",{onClick:()=>Se("longBreak"),"aria-pressed":"longBreak"===$,className:"px-3 sm:px-4 py-2 rounded-xl font-semibold text-sm transition-all "+("longBreak"===$?"bg-green-600 text-white shadow-lg scale-105":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Pausa 15min"})]}),t.jsx("div",{className:"text-center",children:t.jsx("p",{className:"text-gray-600 font-medium text-sm",children:{focus:"Foco Profundo",shortBreak:"Pausa Curta",longBreak:"Pausa Longa"}[$]})}),t.jsx("div",{className:"flex flex-col items-center",children:t.jsxs("div",{className:"relative "+(z?"animate-pulse":""),style:{animationDuration:"2s"},children:[z&&t.jsx("div",{className:"absolute inset-0 rounded-full blur-xl opacity-30 animate-pulse",style:{backgroundColor:Je[$].bg,animationDuration:"1.5s"}}),t.jsxs("svg",{width:200,height:200,viewBox:"0 0 200 200",className:"transform -rotate-90 relative z-10",role:"img","aria-hidden":"true",children:[t.jsx("circle",{cx:100,cy:100,r:90,stroke:Je[$].light,strokeWidth:8,fill:"transparent"}),t.jsx("circle",{cx:100,cy:100,r:90,stroke:Je[$].bg,strokeWidth:8,fill:"transparent",strokeDasharray:Re,strokeDashoffset:Oe,strokeLinecap:"round",className:"transition-all duration-1000 ease-in-out "+(z?"drop-shadow-lg":""),style:z?{filter:`drop-shadow(0 0 8px ${Je[$].bg})`}:{}})]}),t.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-10",children:[z&&t.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[t.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"}),t.jsx("span",{className:"text-[10px] font-medium text-gray-500 uppercase tracking-wider",children:"focus"===$?"Focando":"Pausa"})]}),t.jsxs("p",{role:"timer","aria-live":"polite","aria-atomic":"true",className:"text-5xl sm:text-6xl font-bold tabular-nums",style:{color:Je[$].bg},children:[t.jsx("span",{className:"sr-only",children:`${Fe} minutos e ${_e} segundos restantes`}),t.jsxs("span",{"aria-hidden":"true",children:[Fe,":",_e]})]}),Te&&"focus"===$&&t.jsxs("p",{className:"mt-1 text-xs text-gray-500 max-w-[150px] truncate text-center",title:Te.text,children:["ðŸ“Œ ",Te.text]})]})]})}),t.jsxs("div",{className:"text-center",children:[t.jsxs("p",{className:"text-sm text-gray-600",children:["Ciclos completados: ",t.jsx("span",{className:"font-bold text-blue-600",children:O}),de.currentStreak>0&&t.jsxs("span",{className:"ml-2 text-orange-500 font-bold",children:[de.currentStreak,t.jsx(s,{className:"w-3.5 h-3.5 inline text-orange-500"})]})]}),t.jsx("div",{className:"flex justify-center gap-1 mt-2",role:"img","aria-label":`Progresso: ${O%4} de 4 ciclos para pausa longa`,children:[...Array(4)].map((e,a)=>t.jsx("div",{"aria-hidden":"true",className:"w-2 h-2 rounded-full transition-all "+(a<O%4?"bg-blue-600 scale-125":"bg-gray-300")},a))}),t.jsxs("div",{className:"mt-2 flex items-center justify-center gap-2",children:[t.jsx("div",{className:"w-24 h-1.5 bg-gray-200 rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full rounded-full transition-all "+(ie.pomodorosCompleted>=re?"bg-green-500":"bg-indigo-500"),style:{width:`${Math.min(ie.pomodorosCompleted/re*100,100)}%`}})}),t.jsxs("span",{className:"text-[10px] text-gray-500",children:[ie.pomodorosCompleted,"/",re," meta"]})]})]}),t.jsxs("div",{className:"flex gap-2 sm:gap-3 justify-center",children:[t.jsx("button",{className:(z?"bg-amber-500 hover:bg-amber-600 ring-2 ring-amber-300 animate-pulse":"bg-green-600 hover:bg-green-700")+" text-white font-semibold rounded-xl px-6 py-3 sm:px-8 sm:py-3 transition-all shadow-lg hover:scale-105 flex-1 max-w-[180px] flex items-center justify-center gap-2",onClick:()=>{z||ve(),ue(null),R(!z)},"aria-label":z?"Pausar timer":"Iniciar timer",children:z?t.jsxs(t.Fragment,{children:[t.jsx(l,{className:"w-5 h-5"}),t.jsx("span",{children:"Pausar"})]}):t.jsxs(t.Fragment,{children:[t.jsx(o,{className:"w-5 h-5"}),t.jsx("span",{children:"Iniciar"})]})}),t.jsx("button",{className:"bg-gray-100 hover:bg-gray-200 text-blue-700 font-semibold rounded-xl px-5 py-3 sm:px-6 sm:py-3 transition-all shadow-lg hover:scale-105",onClick:()=>{R(!1),L(Ne($)),ue(null)},"aria-label":`Resetar timer para ${"focus"===$?P.focusDuration:"shortBreak"===$?P.shortBreak:P.longBreak} minutos`,children:"Reset"})]}),null!==me&&t.jsxs("div",{className:"flex items-center justify-center gap-3 bg-indigo-50 rounded-xl p-3",children:[t.jsxs("p",{className:"text-sm text-gray-700",children:["PrÃ³ximo ciclo em ",t.jsxs("span",{className:"font-bold text-indigo-600",children:[me,"s"]})]}),t.jsx("button",{onClick:()=>ue(null),className:"text-xs px-3 py-1.5 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg transition-colors font-medium",children:"Cancelar"})]}),t.jsxs("div",{className:"pt-3 border-t border-gray-200",children:[t.jsx("p",{className:"text-xs text-gray-500 text-center mb-2",children:"Atalhos de teclado"}),t.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[t.jsxs("kbd",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 border border-gray-300 rounded-md text-xs font-mono shadow-sm",children:[t.jsx("span",{className:"text-gray-500",children:"Space"}),t.jsx("span",{className:"text-gray-700",children:"Timer"})]}),t.jsxs("kbd",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 border border-gray-300 rounded-md text-xs font-mono shadow-sm",children:[t.jsx("span",{className:"text-gray-500",children:"N"}),t.jsx("span",{className:"text-gray-700",children:"Tarefa"})]}),t.jsxs("kbd",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 border border-gray-300 rounded-md text-xs font-mono shadow-sm",children:[t.jsx("span",{className:"text-gray-500",children:"Esc"}),t.jsx("span",{className:"text-gray-700",children:"Sair"})]})]})]})]})}),t.jsx("div",{className:"w-full lg:w-[40%]",children:t.jsxs("div",{className:"bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl p-5 sm:p-6 border border-white/20 h-full flex flex-col",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(i,{className:"w-5 h-5 text-indigo-600","aria-hidden":"true"}),t.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"Tarefas"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[Ie>0&&t.jsx("button",{onClick:()=>{H(e=>e.filter(e=>"completed"!==e.status))},className:"text-xs text-gray-500 hover:text-red-500 hover:bg-red-50 px-2 py-1 rounded-lg transition-colors","aria-label":"Remover tarefas concluÃ­das",title:"Limpar concluÃ­das",children:t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(c,{className:"w-3 h-3"}),t.jsx("span",{className:"hidden sm:inline",children:"Limpar"})]})}),Ee>0&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("div",{className:"text-sm font-medium text-gray-600","aria-label":`${Ie} de ${Ee} tarefas concluÃ­das`,children:[t.jsx("span",{className:"text-green-600","aria-hidden":"true",children:Ie}),t.jsx("span",{className:"text-gray-400","aria-hidden":"true",children:"/"}),t.jsx("span",{"aria-hidden":"true",children:Ee})]}),Ie===Ee&&Ee>0&&t.jsx(d,{className:"w-5 h-5 text-yellow-500 animate-bounce","aria-hidden":"true"})]})]})]}),Ee>0&&t.jsxs("div",{className:"mb-4",children:[t.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",role:"progressbar","aria-valuenow":Ae,"aria-valuemin":0,"aria-valuemax":100,"aria-label":`Progresso das tarefas: ${Ae}% concluÃ­do`,children:t.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-emerald-500 transition-all duration-500 ease-out",style:{width:`${Ae}%`},"aria-hidden":"true"})}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1 text-right","aria-hidden":"true",children:[Ae,"% concluÃ­do"]})]}),t.jsxs("div",{className:"flex gap-2 mb-4",children:[t.jsx("label",{htmlFor:"new-task-input",className:"sr-only",children:"Adicionar nova tarefa"}),t.jsx("input",{id:"new-task-input",ref:te,type:"text",value:V,onChange:e=>W(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),Be())},placeholder:"Nova tarefa...",className:"flex-1 px-4 py-2.5 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-sm","aria-describedby":"task-input-hint"}),t.jsx("span",{id:"task-input-hint",className:"sr-only",children:"Pressione Enter para adicionar ou use o botÃ£o ao lado"}),t.jsx("button",{onClick:Be,disabled:!V.trim(),className:"px-4 py-2.5 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-xl transition-all hover:scale-105 disabled:hover:scale-100","aria-label":"Adicionar tarefa",children:t.jsx(x,{className:"w-5 h-5"})})]}),t.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 min-h-[200px] max-h-[400px] lg:max-h-none",children:0===Z.length?t.jsxs("div",{className:"flex flex-col items-center justify-center h-full py-8 text-gray-400",children:[t.jsx(i,{className:"w-12 h-12 mb-3 opacity-50","aria-hidden":"true"}),t.jsx("p",{className:"text-sm",children:"Nenhuma tarefa ainda"}),t.jsx("p",{className:"text-xs mt-1",children:"Pressione N para adicionar"})]}):Z.map(e=>t.jsxs("div",{className:`\n                            group flex flex-col gap-2 p-3 rounded-xl border transition-all duration-300\n                            ${"completed"===e.status&&"bg-green-50 border-green-200"}\n                            ${"in_progress"===e.status&&"bg-indigo-50 border-indigo-300 ring-2 ring-indigo-200"}\n                            ${"pending"===e.status&&"bg-white border-gray-200 hover:border-indigo-300 hover:shadow-sm"}\n                            ${ee===e.id?"animate-pulse scale-[1.02]":""}\n                          `,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("button",{onClick:()=>{return a=e.id,void H(e=>e.map(t=>{if(t.id===a){let s;return"pending"===t.status?(e.some(e=>e.id!==a&&"in_progress"===e.status)&&e.forEach(e=>{"in_progress"===e.status&&e.id!==a&&(e.status="pending")}),s="in_progress"):"in_progress"===t.status?(s="completed",ae(a),setTimeout(()=>ae(null),600),ce(e=>({...e,tasksCompleted:e.tasksCompleted+1}))):s="pending",{...t,status:s,completedAt:"completed"===s?Date.now():void 0}}return t}));var a},className:`\n                                flex-shrink-0 w-11 h-11 min-w-[44px] min-h-[44px] rounded-full border-2 flex items-center justify-center transition-all\n                                ${"completed"===e.status&&"bg-green-500 border-green-500 text-white"}\n                                ${"in_progress"===e.status&&"bg-indigo-500 border-indigo-500 text-white animate-pulse"}\n                                ${"pending"===e.status&&"border-gray-300 hover:border-indigo-400 hover:bg-indigo-50"}\n                              `,"aria-label":"pending"===e.status?"Iniciar tarefa":"in_progress"===e.status?"Concluir tarefa":"Reabrir tarefa",title:"pending"===e.status?"Clique para iniciar":"in_progress"===e.status?"Clique para concluir":"Clique para reabrir",children:["completed"===e.status&&t.jsx(m,{className:"w-5 h-5"}),"in_progress"===e.status&&t.jsx(o,{className:"w-4 h-4"})]}),U===e.id?t.jsx("input",{type:"text",value:X,onChange:e=>Y(e.target.value),onKeyDown:e=>{"Enter"===e.key&&De(),"Escape"===e.key&&Pe()},onBlur:De,autoFocus:!0,className:"flex-1 px-2 py-1 border border-indigo-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm"}):t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("span",{onDoubleClick:()=>Ce(e),className:`\n                                    block text-sm transition-all cursor-pointer\n                                    ${"completed"===e.status?"text-gray-500 line-through":""}\n                                    ${"in_progress"===e.status?"text-indigo-800 font-medium":""}\n                                    ${"pending"===e.status?"text-gray-800":""}\n                                  `,children:e.text}),"in_progress"===e.status&&t.jsxs("span",{className:"inline-flex items-center gap-1 mt-1 text-[10px] font-medium text-indigo-600 uppercase tracking-wide",children:[t.jsx("span",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full animate-pulse"}),"Em andamento"]})]}),!U&&t.jsxs("div",{className:"flex items-center gap-0.5 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity",children:["pending"===e.status&&t.jsx("button",{onClick:()=>{return a=e.id,void H(e=>e.map(e=>e.id===a&&"completed"!==e.status?(ae(a),setTimeout(()=>ae(null),600),ce(e=>({...e,tasksCompleted:e.tasksCompleted+1})),{...e,status:"completed",completedAt:Date.now()}):e));var a},className:"min-w-[44px] min-h-[44px] p-2.5 hover:bg-green-100 rounded-lg transition-colors flex items-center justify-center","aria-label":"Concluir tarefa",title:"Concluir direto",children:t.jsx(m,{className:"w-5 h-5 text-green-600"})}),t.jsx("button",{onClick:()=>Ce(e),className:"min-w-[44px] min-h-[44px] p-2.5 hover:bg-gray-100 rounded-lg transition-colors flex items-center justify-center","aria-label":"Editar tarefa",children:t.jsx(u,{className:"w-5 h-5 text-gray-500"})}),t.jsx("button",{onClick:()=>{return a=e.id,void H(e=>e.filter(e=>e.id!==a));var a},className:"min-w-[44px] min-h-[44px] p-2.5 hover:bg-red-100 rounded-lg transition-colors flex items-center justify-center","aria-label":"Excluir tarefa",children:t.jsx(c,{className:"w-5 h-5 text-red-500"})})]})]}),"pending"!==e.status&&e.focusTimeSpent>0&&t.jsx("div",{className:"ml-10",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"flex-1 h-1 bg-gray-200 rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full transition-all "+("completed"===e.status?"bg-green-400":"bg-indigo-400"),style:{width:`${Math.min(e.focusTimeSpent/(60*P.focusDuration)*100,100)}%`}})}),t.jsxs("span",{className:"text-[10px] text-gray-500 tabular-nums min-w-[40px]",children:[Math.floor(e.focusTimeSpent/60),"min"]})]})})]},e.id))}),Z.length>0&&t.jsxs("div",{className:"mt-4 pt-3 border-t border-gray-200",children:[t.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3 text-[10px] text-gray-500",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"w-3 h-3 rounded-full border-2 border-gray-300"}),"Pendente"]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"w-3 h-3 rounded-full bg-indigo-500"}),"Em andamento"]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"w-3 h-3 rounded-full bg-green-500"}),"ConcluÃ­da"]})]}),t.jsx("p",{className:"text-[10px] text-gray-400 text-center mt-2",children:"Clique no cÃ­rculo para avanÃ§ar estado â€¢ Duplo clique no texto para editar"})]})]})})]})})})]}),Ie===Ee&&Ee>0&&Ie>0&&t.jsxs("div",{className:"fixed inset-0 pointer-events-none z-50",role:"status","aria-live":"polite",children:[t.jsx("span",{className:"sr-only",children:"ParabÃ©ns! Todas as tarefas foram concluÃ­das!"}),t.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:t.jsx("div",{className:"text-6xl animate-bounce","aria-hidden":"true",children:"ðŸŽ‰"})})]}),M&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:ye,role:"dialog","aria-modal":"true","aria-labelledby":"settings-title",children:t.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-md mx-4 p-6 space-y-6 animate-in zoom-in-95 duration-200",onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h2",{id:"settings-title",className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(r,{className:"w-5 h-5 text-indigo-600","aria-hidden":"true"}),"ConfiguraÃ§Ãµes do Pomodoro"]}),t.jsx("button",{onClick:ye,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors","aria-label":"Fechar configuraÃ§Ãµes",children:t.jsx(n,{className:"w-5 h-5 text-gray-500"})})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Presets"}),t.jsx("div",{className:"grid grid-cols-3 gap-2",children:j.map(e=>{const a=A.focusDuration===e.settings.focusDuration&&A.shortBreak===e.settings.shortBreak&&A.longBreak===e.settings.longBreak;return t.jsxs("button",{onClick:()=>T(e.settings),className:"p-2.5 rounded-xl border-2 text-center transition-all hover:scale-105 "+(a?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 dark:border-gray-700 hover:border-indigo-300"),children:[t.jsx("span",{className:"text-lg","aria-hidden":"true",children:e.emoji}),t.jsx("p",{className:"text-xs font-semibold text-gray-900 dark:text-white mt-1",children:e.name}),t.jsxs("p",{className:"text-[10px] text-gray-500 dark:text-gray-400",children:[e.settings.focusDuration,"/",e.settings.shortBreak,"min"]})]},e.name)})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{htmlFor:"focus-duration",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"DuraÃ§Ã£o do Foco (minutos)"}),t.jsx("input",{id:"focus-duration",type:"number",min:"1",max:"120",value:A.focusDuration,onChange:e=>T(a=>({...a,focusDuration:parseInt(e.target.value)||1})),className:"w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-800 dark:text-white","aria-describedby":"focus-hint"}),t.jsx("p",{id:"focus-hint",className:"text-xs text-gray-500 dark:text-gray-400",children:"TÃ©cnica Pomodoro recomenda 25 minutos (1-120 min)"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{htmlFor:"short-break",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Pausa Curta (minutos)"}),t.jsx("input",{id:"short-break",type:"number",min:"1",max:"60",value:A.shortBreak,onChange:e=>T(a=>({...a,shortBreak:parseInt(e.target.value)||1})),className:"w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-800 dark:text-white","aria-describedby":"short-break-hint"}),t.jsx("p",{id:"short-break-hint",className:"text-xs text-gray-500 dark:text-gray-400",children:"Recomendado: 5 minutos (1-60 min)"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{htmlFor:"long-break",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Pausa Longa (minutos)"}),t.jsx("input",{id:"long-break",type:"number",min:"1",max:"60",value:A.longBreak,onChange:e=>T(a=>({...a,longBreak:parseInt(e.target.value)||1})),className:"w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-800 dark:text-white","aria-describedby":"long-break-hint"}),t.jsx("p",{id:"long-break-hint",className:"text-xs text-gray-500 dark:text-gray-400",children:"Recomendado: 15 minutos (1-60 min)"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{htmlFor:"cycles",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Ciclos antes da pausa longa"}),t.jsx("input",{id:"cycles",type:"number",min:"1",max:"10",value:A.cyclesBeforeLongBreak,onChange:e=>T(a=>({...a,cyclesBeforeLongBreak:parseInt(e.target.value)||1})),className:"w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-800 dark:text-white","aria-describedby":"cycles-hint"}),t.jsx("p",{id:"cycles-hint",className:"text-xs text-gray-500 dark:text-gray-400",children:"Recomendado: 4 ciclos (1-10 ciclos)"})]})]}),t.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/30 rounded-xl p-4 space-y-2",children:[t.jsx("p",{className:"text-sm font-medium text-indigo-700 dark:text-indigo-300",children:"Resumo do ciclo:"}),t.jsxs("p",{className:"text-xs text-indigo-600 dark:text-indigo-400",children:[A.cyclesBeforeLongBreak,"Ã— (",A.focusDuration," min foco + ",A.shortBreak," min pausa) + ",A.longBreak," min pausa longa"]}),t.jsxs("p",{className:"text-xs text-indigo-500 dark:text-indigo-500",children:["Total por bloco: ",(A.focusDuration+A.shortBreak)*A.cyclesBeforeLongBreak+A.longBreak," min"]})]}),t.jsxs("div",{className:"space-y-4 pt-2 border-t border-gray-200 dark:border-gray-700",children:[t.jsxs("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[t.jsx(g,{className:"w-4 h-4 text-indigo-600"}),"Engajamento"]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{htmlFor:"daily-goal",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Meta diÃ¡ria de pomodoros"}),t.jsx("input",{id:"daily-goal",type:"number",min:"1",max:"20",value:re,onChange:e=>ne(Math.max(1,Math.min(20,parseInt(e.target.value)||1))),className:"w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-800 dark:text-white"}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"AlcanÃ§ar a meta mantÃ©m seu streak ativo (1-20)"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Auto-transiÃ§Ã£o"}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Iniciar prÃ³ximo ciclo automaticamente"})]}),t.jsx("button",{onClick:()=>oe(!le),className:"relative w-12 h-7 rounded-full transition-colors "+(le?"bg-indigo-600":"bg-gray-300 dark:bg-gray-600"),role:"switch","aria-checked":le,"aria-label":"Ativar auto-transiÃ§Ã£o entre ciclos",children:t.jsx("span",{className:"absolute top-0.5 left-0.5 w-6 h-6 bg-white rounded-full shadow transition-transform "+(le?"translate-x-5":"translate-x-0")})})]})]}),t.jsxs("div",{className:"flex items-center justify-between pt-2",children:[t.jsxs("button",{onClick:()=>{T(y)},className:"flex items-center gap-2 px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors","aria-label":"Restaurar configuraÃ§Ãµes padrÃ£o",children:[t.jsx(h,{className:"w-4 h-4"}),"PadrÃ£o"]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:ye,className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:"Cancelar"}),t.jsx("button",{onClick:()=>{const e={focusDuration:Math.max(1,Math.min(120,A.focusDuration)),shortBreak:Math.max(1,Math.min(60,A.shortBreak)),longBreak:Math.max(1,Math.min(60,A.longBreak)),cyclesBeforeLongBreak:Math.max(1,Math.min(10,A.cyclesBeforeLongBreak))};I(e),fe(e),z||L(je($,e)),E(!1),b({title:"ConfiguraÃ§Ãµes salvas",description:"As novas duraÃ§Ãµes serÃ£o aplicadas no prÃ³ximo ciclo."})},className:"px-4 py-2 text-sm bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors font-medium",children:"Salvar"})]})]})]})}),ge&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:()=>he(!1),role:"dialog","aria-modal":"true","aria-labelledby":"report-title",children:t.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-sm mx-4 p-6 space-y-5 animate-in zoom-in-95 duration-200",onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{className:"text-center",children:[t.jsx(p,{className:"w-8 h-8 text-indigo-600 mx-auto mb-2"}),t.jsx("h2",{id:"report-title",className:"text-xl font-bold text-gray-900 dark:text-white",children:"RelatÃ³rio da SessÃ£o"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/30 rounded-xl p-3 text-center",children:[t.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:O}),t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Pomodoros"})]}),t.jsxs("div",{className:"bg-green-50 dark:bg-green-900/30 rounded-xl p-3 text-center",children:[t.jsx("p",{className:"text-2xl font-bold text-green-600",children:$e}),t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Min focados"})]}),t.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/30 rounded-xl p-3 text-center",children:[t.jsx("p",{className:"text-2xl font-bold text-amber-600",children:Z.filter(e=>e.completedAt&&e.completedAt>=se.current).length}),t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Tarefas concluÃ­das"})]}),t.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/30 rounded-xl p-3 text-center",children:[t.jsx("p",{className:"text-2xl font-bold text-orange-500",children:de.currentStreak>0?t.jsxs(t.Fragment,{children:[de.currentStreak,t.jsx(s,{className:"w-5 h-5 inline"})]}):"â€”"}),t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Streak"})]})]}),t.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-xl p-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Meta diÃ¡ria"}),t.jsxs("span",{className:"text-xs font-bold text-indigo-600",children:[ie.pomodorosCompleted,"/",re]})]}),t.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full rounded-full transition-all "+(ie.pomodorosCompleted>=re?"bg-gradient-to-r from-green-500 to-emerald-500":"bg-gradient-to-r from-indigo-500 to-purple-500"),style:{width:`${Math.min(ie.pomodorosCompleted/re*100,100)}%`}})}),ie.pomodorosCompleted>=re&&t.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1 text-center font-medium",children:"Meta alcanÃ§ada!"})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>he(!1),className:"flex-1 px-4 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl transition-colors font-medium text-sm",children:"Continuar"}),t.jsx("button",{onClick:()=>D(-1),className:"flex-1 px-4 py-2.5 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-xl transition-colors font-medium text-sm",children:"Sair"})]})]})})]})]})}export{D as default};
