import{x as Q,y as Pe,j as e,z as Ce,E as ee,F as Ee,G as Ae,H as ke,J as A,K as Le,M as Re,N as O,k as Ie,O as E,B as k,T as _e,a as Fe,b as L,m as R,C as I,c as _,d as F,e as T,f as U,L as j,I as y}from"./index-Y2JN9SCy.js";import{r as l,u as Te}from"./react-vendor-Bq2irNGE.js";import{r as Ue,i as Me,I as X,V as De,Y as Ye,L as z}from"./ui-vendor-CvST3MhZ.js";var M="Switch",[$e]=Ce(M),[ze,Be]=$e(M),ae=l.forwardRef((a,t)=>{const{__scopeSwitch:s,name:o,checked:r,defaultChecked:i,required:d,disabled:c,value:m="on",onCheckedChange:f,form:h,...p}=a,[v,x]=l.useState(null),g=Q(t,b=>x(b)),w=l.useRef(!1),S=v?h||!!v.closest("form"):!0,[N,D]=Pe({prop:r,defaultProp:i??!1,onChange:f,caller:M});return e.jsxs(ze,{scope:s,checked:N,disabled:c,children:[e.jsx(ee.button,{type:"button",role:"switch","aria-checked":N,"aria-required":d,"data-state":ne(N),"data-disabled":c?"":void 0,disabled:c,value:m,...p,ref:g,onClick:Ee(a.onClick,b=>{D(Y=>!Y),S&&(w.current=b.isPropagationStopped(),w.current||b.stopPropagation())})}),S&&e.jsx(re,{control:v,bubbles:!w.current,name:o,value:m,checked:N,required:d,disabled:c,form:h,style:{transform:"translateX(-100%)"}})]})});ae.displayName=M;var se="SwitchThumb",te=l.forwardRef((a,t)=>{const{__scopeSwitch:s,...o}=a,r=Be(se,s);return e.jsx(ee.span,{"data-state":ne(r.checked),"data-disabled":r.disabled?"":void 0,...o,ref:t})});te.displayName=se;var Oe="SwitchBubbleInput",re=l.forwardRef(({__scopeSwitch:a,control:t,checked:s,bubbles:o=!0,...r},i)=>{const d=l.useRef(null),c=Q(d,i),m=Ae(s),f=ke(t);return l.useEffect(()=>{const h=d.current;if(!h)return;const p=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(p,"checked").set;if(m!==s&&x){const g=new Event("click",{bubbles:o});x.call(h,s),h.dispatchEvent(g)}},[m,s,o]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...r,tabIndex:-1,ref:c,style:{...r.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});re.displayName=Oe;function ne(a){return a?"checked":"unchecked"}var ie=ae,He=te;const H=l.forwardRef(({className:a,...t},s)=>e.jsx(ie,{className:A("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...t,ref:s,children:e.jsx(He,{className:A("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));H.displayName=ie.displayName;function Ge(a,t=[]){let s=[];function o(i,d){const c=l.createContext(d);c.displayName=i+"Context";const m=s.length;s=[...s,d];const f=p=>{var N;const{scope:v,children:x,...g}=p,w=((N=v==null?void 0:v[a])==null?void 0:N[m])||c,S=l.useMemo(()=>g,Object.values(g));return e.jsx(w.Provider,{value:S,children:x})};f.displayName=i+"Provider";function h(p,v){var w;const x=((w=v==null?void 0:v[a])==null?void 0:w[m])||c,g=l.useContext(x);if(g)return g;if(d!==void 0)return d;throw new Error(`\`${p}\` must be used within \`${i}\``)}return[f,h]}const r=()=>{const i=s.map(d=>l.createContext(d));return function(c){const m=(c==null?void 0:c[a])||i;return l.useMemo(()=>({[`__scope${a}`]:{...c,[a]:m}}),[c,m])}};return r.scopeName=a,[o,qe(r,...t)]}function qe(...a){const t=a[0];if(a.length===1)return t;const s=()=>{const o=a.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(i){const d=o.reduce((c,{useScope:m,scopeName:f})=>{const p=m(i)[`__scope${f}`];return{...c,...p}},{});return l.useMemo(()=>({[`__scope${t.scopeName}`]:d}),[d])}};return s.scopeName=t.scopeName,s}var Ve=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],G=Ve.reduce((a,t)=>{const s=Le(`Primitive.${t}`),o=l.forwardRef((r,i)=>{const{asChild:d,...c}=r,m=d?s:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(m,{...c,ref:i})});return o.displayName=`Primitive.${t}`,{...a,[t]:o}},{}),oe={exports:{}},ce={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P=l;function We(a,t){return a===t&&(a!==0||1/a===1/t)||a!==a&&t!==t}var Je=typeof Object.is=="function"?Object.is:We,Ke=P.useState,Xe=P.useEffect,Ze=P.useLayoutEffect,Qe=P.useDebugValue;function ea(a,t){var s=t(),o=Ke({inst:{value:s,getSnapshot:t}}),r=o[0].inst,i=o[1];return Ze(function(){r.value=s,r.getSnapshot=t,B(r)&&i({inst:r})},[a,s,t]),Xe(function(){return B(r)&&i({inst:r}),a(function(){B(r)&&i({inst:r})})},[a]),Qe(s),s}function B(a){var t=a.getSnapshot;a=a.value;try{var s=t();return!Je(a,s)}catch{return!0}}function aa(a,t){return t()}var sa=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?aa:ea;ce.useSyncExternalStore=P.useSyncExternalStore!==void 0?P.useSyncExternalStore:sa;oe.exports=ce;var ta=oe.exports;function ra(){return ta.useSyncExternalStore(na,()=>!0,()=>!1)}function na(){return()=>{}}var q="Avatar",[ia]=Ge(q),[oa,le]=ia(q),de=l.forwardRef((a,t)=>{const{__scopeAvatar:s,...o}=a,[r,i]=l.useState("idle");return e.jsx(oa,{scope:s,imageLoadingStatus:r,onImageLoadingStatusChange:i,children:e.jsx(G.span,{...o,ref:t})})});de.displayName=q;var ue="AvatarImage",me=l.forwardRef((a,t)=>{const{__scopeAvatar:s,src:o,onLoadingStatusChange:r=()=>{},...i}=a,d=le(ue,s),c=ca(o,i),m=Re(f=>{r(f),d.onImageLoadingStatusChange(f)});return O(()=>{c!=="idle"&&m(c)},[c,m]),c==="loaded"?e.jsx(G.img,{...i,ref:t,src:o}):null});me.displayName=ue;var fe="AvatarFallback",he=l.forwardRef((a,t)=>{const{__scopeAvatar:s,delayMs:o,...r}=a,i=le(fe,s),[d,c]=l.useState(o===void 0);return l.useEffect(()=>{if(o!==void 0){const m=window.setTimeout(()=>c(!0),o);return()=>window.clearTimeout(m)}},[o]),d&&i.imageLoadingStatus!=="loaded"?e.jsx(G.span,{...r,ref:t}):null});he.displayName=fe;function Z(a,t){return a?t?(a.src!==t&&(a.src=t),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}function ca(a,{referrerPolicy:t,crossOrigin:s}){const o=ra(),r=l.useRef(null),i=o?(r.current||(r.current=new window.Image),r.current):null,[d,c]=l.useState(()=>Z(i,a));return O(()=>{c(Z(i,a))},[i,a]),O(()=>{const m=p=>()=>{c(p)};if(!i)return;const f=m("loaded"),h=m("error");return i.addEventListener("load",f),i.addEventListener("error",h),t&&(i.referrerPolicy=t),typeof s=="string"&&(i.crossOrigin=s),()=>{i.removeEventListener("load",f),i.removeEventListener("error",h)}},[i,s,t]),d}var ve=de,pe=me,xe=he;const ge=l.forwardRef(({className:a,...t},s)=>e.jsx(ve,{ref:s,className:A("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...t}));ge.displayName=ve.displayName;const we=l.forwardRef(({className:a,...t},s)=>e.jsx(pe,{ref:s,className:A("aspect-square h-full w-full",a),...t}));we.displayName=pe.displayName;const je=l.forwardRef(({className:a,...t},s)=>e.jsx(xe,{ref:s,className:A("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...t}));je.displayName=xe.displayName;function ma(){var V;const{toast:a}=Ie(),t=Te(),[s,o]=l.useState({name:"",email:"",university:"",graduationYear:new Date().getFullYear(),avatar:""}),[r,i]=l.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[d,c]=l.useState({theme:"system",notifications:!0,emailNotifications:!1}),[m,f]=l.useState(!1),[h,p]=l.useState(!1),[v,x]=l.useState(!1),[g,w]=l.useState("");l.useEffect(()=>{S()},[]);const S=async()=>{try{const n=E.getCurrentUser();n&&(o({name:n.name,email:n.email,university:n.university||"",graduationYear:n.graduationYear||new Date().getFullYear(),avatar:n.avatar||""}),w(n.avatar||"")),c({theme:"system",notifications:!0,emailNotifications:!1})}catch{a({title:"Erro",description:"Não foi possível carregar os dados do perfil",variant:"destructive"})}},N=n=>n.trim().length<3?(a({title:"Nome inválido",description:"O nome deve ter pelo menos 3 caracteres",variant:"destructive"}),!1):!0,D=n=>n.trim().length<3?(a({title:"Universidade inválida",description:"O nome da universidade deve ter pelo menos 3 caracteres",variant:"destructive"}),!1):!0,b=n=>{const u=new Date().getFullYear();return n<u||n>u+10?(a({title:"Ano inválido",description:"O ano de formatura deve estar entre o ano atual e daqui a 10 anos",variant:"destructive"}),!1):!0},Y=()=>{if(r.currentPassword.length<8)return a({title:"Senha atual inválida",description:"A senha atual deve ter pelo menos 8 caracteres",variant:"destructive"}),!1;if(r.newPassword.length<8)return a({title:"Nova senha inválida",description:"A nova senha deve ter pelo menos 8 caracteres",variant:"destructive"}),!1;const n=/[A-Z]/.test(r.newPassword),u=/[a-z]/.test(r.newPassword),C=/[0-9]/.test(r.newPassword);return!n||!u||!C?(a({title:"Senha fraca",description:"A senha deve conter letras maiúsculas, minúsculas e números",variant:"destructive"}),!1):r.newPassword!==r.confirmPassword?(a({title:"Senhas não coincidem",description:"A nova senha e a confirmação devem ser iguais",variant:"destructive"}),!1):!0},Ne=async()=>{if(N(s.name)&&D(s.university)&&b(s.graduationYear)){f(!0);try{const n=E.getCurrentUser();n&&await E.updateUser(n.id,{name:s.name,university:s.university,graduationYear:s.graduationYear}),a({title:"Sucesso!",description:"Perfil atualizado com sucesso. Redirecionando..."}),setTimeout(()=>{t("/dashboard")},1e3)}catch{a({title:"Erro",description:"Não foi possível atualizar o perfil",variant:"destructive"})}finally{f(!1)}}},ye=async n=>{var W;const u=(W=n.target.files)==null?void 0:W[0];if(!u)return;if(!u.type.startsWith("image/")){a({title:"Arquivo inválido",description:"Por favor, selecione uma imagem",variant:"destructive"});return}if(u.size>2*1024*1024){a({title:"Arquivo muito grande",description:"A imagem deve ter no máximo 2MB",variant:"destructive"});return}const C=new FileReader;C.onloadend=async()=>{const $=C.result;w($);const J=E.getCurrentUser();if(J)try{await E.updateUser(J.id,{avatar:$}),o(K=>({...K,avatar:$})),a({title:"Sucesso!",description:"Avatar atualizado com sucesso"})}catch{a({title:"Erro",description:"Não foi possível fazer upload do avatar",variant:"destructive"})}},C.readAsDataURL(u)},Se=async()=>{if(Y()){p(!0);try{a({title:"Sucesso!",description:"Senha alterada com sucesso. Redirecionando..."}),i({currentPassword:"",newPassword:"",confirmPassword:""}),setTimeout(()=>{t("/dashboard")},1e3)}catch{a({title:"Erro",description:"Não foi possível alterar a senha",variant:"destructive"})}finally{p(!1)}}},be=async()=>{x(!0);try{a({title:"Sucesso!",description:"Preferências atualizadas com sucesso. Redirecionando..."}),setTimeout(()=>{t("/dashboard")},1e3)}catch{a({title:"Erro",description:"Não foi possível atualizar as preferências",variant:"destructive"})}finally{x(!1)}};return e.jsxs("div",{className:"container max-w-4xl mx-auto px-4 py-8 md:py-12",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs(k,{variant:"ghost",size:"sm",onClick:()=>t("/dashboard"),className:"mb-4 flex items-center gap-2",children:[e.jsx(Ue,{className:"h-4 w-4"}),"Voltar ao Dashboard"]}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-2",children:"Meu Perfil"}),e.jsx("p",{className:"text-muted-foreground",children:"Gerencie suas informações pessoais e preferências"})]}),e.jsxs(_e,{defaultValue:"personal",className:"space-y-6",children:[e.jsxs(Fe,{className:"grid w-full grid-cols-2 md:grid-cols-4 gap-2",children:[e.jsxs(L,{value:"personal",className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Pessoal"})]}),e.jsxs(L,{value:"avatar",className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Avatar"})]}),e.jsxs(L,{value:"security",className:"flex items-center gap-2",children:[e.jsx(De,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Segurança"})]}),e.jsxs(L,{value:"preferences",className:"flex items-center gap-2",children:[e.jsx(Ye,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Preferências"})]})]}),e.jsx(R,{value:"personal",children:e.jsxs(I,{children:[e.jsxs(_,{children:[e.jsx(F,{children:"Informações Pessoais"}),e.jsx(T,{children:"Atualize suas informações de perfil"})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"name",children:"Nome Completo"}),e.jsx(y,{id:"name",value:s.name,onChange:n=>o(u=>({...u,name:n.target.value})),placeholder:"Seu nome completo"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"email",children:"Email"}),e.jsx(y,{id:"email",type:"email",value:s.email,disabled:!0,className:"bg-muted"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"O email não pode ser alterado"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"university",children:"Universidade"}),e.jsx(y,{id:"university",value:s.university,onChange:n=>o(u=>({...u,university:n.target.value})),placeholder:"Nome da sua universidade"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"graduationYear",children:"Ano de Formatura"}),e.jsx(y,{id:"graduationYear",type:"number",min:new Date().getFullYear(),max:new Date().getFullYear()+10,value:s.graduationYear,onChange:n=>o(u=>({...u,graduationYear:parseInt(n.target.value)}))})]}),e.jsx(k,{onClick:Ne,className:"w-full md:w-auto",disabled:m,children:m?e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"mr-2 h-4 w-4 animate-spin"}),"Salvando..."]}):"Salvar Alterações"})]})]})}),e.jsx(R,{value:"avatar",children:e.jsxs(I,{children:[e.jsxs(_,{children:[e.jsx(F,{children:"Avatar do Perfil"}),e.jsx(T,{children:"Faça upload de uma foto de perfil"})]}),e.jsx(U,{className:"space-y-6",children:e.jsxs("div",{className:"flex flex-col items-center gap-6",children:[e.jsxs(ge,{className:"h-32 w-32 md:h-40 md:w-40",children:[e.jsx(we,{src:g||s.avatar,alt:s.name}),e.jsx(je,{className:"text-4xl",children:((V=s.name)==null?void 0:V.split(" ").map(n=>n[0]).join("").toUpperCase())||"U"})]}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx(j,{htmlFor:"avatar-upload",className:"cursor-pointer",children:e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors",children:[e.jsx(X,{className:"h-4 w-4"}),"Escolher Imagem"]})}),e.jsx(y,{id:"avatar-upload",type:"file",accept:"image/*",className:"hidden",onChange:ye}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"PNG, JPG ou WEBP. Máximo 2MB."})]})]})})]})}),e.jsx(R,{value:"security",children:e.jsxs(I,{children:[e.jsxs(_,{children:[e.jsx(F,{children:"Alterar Senha"}),e.jsx(T,{children:"Mantenha sua conta segura com uma senha forte"})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"currentPassword",children:"Senha Atual"}),e.jsx(y,{id:"currentPassword",type:"password",value:r.currentPassword,onChange:n=>i(u=>({...u,currentPassword:n.target.value})),placeholder:"Digite sua senha atual"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"newPassword",children:"Nova Senha"}),e.jsx(y,{id:"newPassword",type:"password",value:r.newPassword,onChange:n=>i(u=>({...u,newPassword:n.target.value})),placeholder:"Digite a nova senha"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Mínimo 8 caracteres, com letras maiúsculas, minúsculas e números"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"confirmPassword",children:"Confirmar Nova Senha"}),e.jsx(y,{id:"confirmPassword",type:"password",value:r.confirmPassword,onChange:n=>i(u=>({...u,confirmPassword:n.target.value})),placeholder:"Confirme a nova senha"})]}),e.jsx(k,{onClick:Se,className:"w-full md:w-auto",disabled:h,children:h?e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"mr-2 h-4 w-4 animate-spin"}),"Alterando..."]}):"Alterar Senha"})]})]})}),e.jsx(R,{value:"preferences",children:e.jsxs(I,{children:[e.jsxs(_,{children:[e.jsx(F,{children:"Preferências"}),e.jsx(T,{children:"Personalize sua experiência"})]}),e.jsxs(U,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(j,{children:"Tema"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Escolha o tema da interface"})]}),e.jsxs("select",{value:d.theme,onChange:n=>c(u=>({...u,theme:n.target.value})),className:"px-3 py-2 border rounded-md",children:[e.jsx("option",{value:"light",children:"Claro"}),e.jsx("option",{value:"dark",children:"Escuro"}),e.jsx("option",{value:"system",children:"Sistema"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(j,{children:"Notificações"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receba notificações no navegador"})]}),e.jsx(H,{checked:d.notifications,onCheckedChange:n=>c(u=>({...u,notifications:n}))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(j,{children:"Notificações por Email"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receba atualizações por email"})]}),e.jsx(H,{checked:d.emailNotifications,onCheckedChange:n=>c(u=>({...u,emailNotifications:n}))})]})]}),e.jsx(k,{onClick:be,className:"w-full md:w-auto",disabled:v,children:v?e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"mr-2 h-4 w-4 animate-spin"}),"Salvando..."]}):"Salvar Preferências"})]})]})})]})]})}export{ma as default};
