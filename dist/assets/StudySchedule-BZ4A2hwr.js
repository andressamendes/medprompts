import{j as e,a0 as B,a1 as u,t,A as k,B as i,C as j,c as P,d as Z,e as q,f as v,L as x,I as p}from"./index-BhAyOxFg.js";import{r as o,L as H}from"./react-vendor-Bq2irNGE.js";import{B as $}from"./Combination-5w5DrGZV.js";import{D as K,a as V,b as J,c as Q,d as U,e as W}from"./dialog-D2VJVo7V.js";import{g as f,s as X,t as Y,a2 as T,j as _,a3 as ee,a4 as L,m as N,K as se,o as ae}from"./ui-vendor-CmrPERSd.js";const I=o.forwardRef(({className:l,...d},h)=>e.jsx("textarea",{className:`flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${l||""}`,ref:h,...d}));I.displayName="Textarea";function le(){const{isCalendarAuthenticated:l,isCalendarLoading:d,connectCalendar:h,disconnectCalendar:z}=B(),[b,y]=o.useState([]),[F,C]=o.useState(!1),[R,c]=o.useState(!1),[g,w]=o.useState(!1),[a,r]=o.useState({summary:"",description:"",date:"",startTime:"",duration:"60",enableSpacedRepetition:!1});o.useEffect(()=>{l&&!d&&m()},[l,d]);const D=async()=>{try{await h(),t({title:"Login realizado",description:"Conectado ao Google Calendar"}),m()}catch(s){t({title:"Erro ao fazer login",description:s.message||"Erro desconhecido",variant:"destructive"})}},O=()=>{z(),y([]),t({title:"Logout realizado",description:"Desconectado do Google Calendar"})},m=async()=>{C(!0);try{const s=await u.listEvents(20);y(s)}catch(s){t({title:"Erro ao carregar eventos",description:s.message||"Erro desconhecido",variant:"destructive"})}finally{C(!1)}},A=async()=>{if(!a.summary||!a.date||!a.startTime){t({title:"Campos obrigatórios",description:"Preencha título, data e horário",variant:"destructive"});return}w(!0);try{const s=new Date(`${a.date}T${a.startTime}`),n=new Date(s);n.setMinutes(n.getMinutes()+parseInt(a.duration));const S={summary:a.summary,description:a.description,start:{dateTime:s.toISOString(),timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone},end:{dateTime:n.toISOString(),timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone},reminders:{useDefault:!1,overrides:[{method:"popup",minutes:30}]},colorId:"9"};await u.createEvent(S),a.enableSpacedRepetition?(await u.createSpacedRepetitionSeries({summary:a.summary,description:a.description,reminders:S.reminders},s,parseInt(a.duration)),t({title:"Evento criado com revisões",description:"Evento e 5 revisões espaçadas foram agendados"})):t({title:"Evento criado",description:"Seu evento foi adicionado ao calendário"}),c(!1),r({summary:"",description:"",date:"",startTime:"",duration:"60",enableSpacedRepetition:!1}),m()}catch(s){t({title:"Erro ao criar evento",description:s.message||"Erro desconhecido",variant:"destructive"})}finally{w(!1)}},G=async s=>{if(confirm("Tem certeza que deseja excluir este evento?"))try{await u.deleteEvent(s),t({title:"Evento excluído",description:"O evento foi removido do calendário"}),m()}catch(n){t({title:"Erro ao excluir evento",description:n.message||"Erro desconhecido",variant:"destructive"})}},M=s=>new Date(s).toLocaleDateString("pt-BR",{day:"2-digit",month:"short",year:"numeric"}),E=s=>new Date(s).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"});return d?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(k,{}),e.jsxs("div",{className:"flex flex-col items-center justify-center py-24 gap-4",children:[e.jsx(f,{className:"h-12 w-12 animate-spin text-blue-600"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Inicializando Google Calendar..."})]})]}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(k,{}),e.jsxs("section",{className:"relative overflow-hidden bg-gradient-to-br from-blue-50 via-white to-indigo-50 dark:from-gray-950 dark:via-gray-900 dark:to-blue-950 py-16 sm:py-24",children:[e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsx(H,{to:"/tools",children:e.jsxs(i,{variant:"ghost",className:"mb-6 gap-2 hover:gap-3 transition-all",children:[e.jsx(X,{className:"h-4 w-4"}),"Voltar para Ferramentas"]})}),e.jsxs("div",{className:"text-center max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-sm font-medium mb-4",children:[e.jsx(Y,{className:"h-4 w-4"}),e.jsx("span",{children:"Organize seus Estudos com Google Calendar"})]}),e.jsx("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-bold tracking-tight",children:e.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"Cronograma de Estudos"})}),e.jsx("p",{className:"text-lg sm:text-xl text-muted-foreground max-w-2xl mx-auto",children:"Integre com seu Google Calendar e crie sessões de estudo com revisão espaçada automática"}),l?e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsx($,{variant:"secondary",className:"text-sm px-4 py-2",children:"✓ Conectado Automaticamente"}),e.jsxs(i,{onClick:O,variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(_,{className:"h-4 w-4"}),"Desconectar"]})]}):e.jsxs(i,{onClick:D,size:"lg",className:"gap-2",children:[e.jsx(T,{className:"h-5 w-5"}),"Conectar com Google Calendar"]})]})]}),e.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-blue-300 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),e.jsx("div",{className:"absolute top-0 right-1/4 w-96 h-96 bg-indigo-300 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"})]}),e.jsx("main",{className:"container mx-auto px-4 py-8 sm:py-12",children:l?e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Próximas Sessões"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(i,{onClick:m,variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(ee,{className:"h-4 w-4"}),"Atualizar"]}),e.jsxs(i,{onClick:()=>c(!0),className:"gap-2",children:[e.jsx(L,{className:"h-4 w-4"}),"Nova Sessão"]})]})]}),F?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 gap-4",children:[e.jsx(f,{className:"h-12 w-12 animate-spin text-blue-600"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Carregando eventos..."})]}):e.jsx(e.Fragment,{children:b.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(s=>e.jsxs(j,{className:"group hover:shadow-lg transition-all duration-300",children:[e.jsx(P,{children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(Z,{className:"text-lg line-clamp-2",children:s.summary}),e.jsxs(q,{className:"mt-2 flex items-center gap-2 text-xs",children:[e.jsx(N,{className:"h-3 w-3"}),M(s.start.dateTime)]})]}),e.jsx(i,{variant:"ghost",size:"icon",className:"shrink-0 h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>s.id&&G(s.id),children:e.jsx(se,{className:"h-4 w-4 text-destructive"})})]})}),e.jsxs(v,{className:"space-y-3",children:[s.description&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ae,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:[E(s.start.dateTime)," - ",E(s.end.dateTime)]})]})]})]},s.id))}):e.jsx(j,{className:"border-2 border-dashed",children:e.jsxs(v,{className:"flex flex-col items-center justify-center py-12 sm:py-16 gap-4",children:[e.jsx("div",{className:"rounded-full bg-muted p-4",children:e.jsx(N,{className:"h-8 w-8 text-muted-foreground"})}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("p",{className:"font-medium",children:"Nenhuma sessão agendada"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Crie sua primeira sessão de estudos"})]}),e.jsxs(i,{onClick:()=>c(!0),className:"gap-2",children:[e.jsx(L,{className:"h-4 w-4"}),"Criar sessão"]})]})})})]}):e.jsx(j,{className:"max-w-2xl mx-auto",children:e.jsxs(v,{className:"flex flex-col items-center justify-center py-12 gap-6",children:[e.jsx("div",{className:"rounded-full bg-blue-100 dark:bg-blue-900/30 p-6",children:e.jsx(N,{className:"h-12 w-12 text-blue-600"})}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Conecte-se ao Google Calendar"}),e.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"Sincronize suas sessões de estudo com o Google Calendar e receba lembretes automáticos. Crie revisões espaçadas baseadas na curva de esquecimento."})]}),e.jsxs(i,{onClick:D,size:"lg",className:"gap-2",children:[e.jsx(T,{className:"h-5 w-5"}),"Conectar com Google Calendar"]})]})})}),e.jsx(K,{open:R,onOpenChange:c,children:e.jsxs(V,{className:"max-w-2xl",children:[e.jsxs(J,{children:[e.jsx(Q,{children:"Nova Sessão de Estudos"}),e.jsx(U,{children:"Crie uma sessão de estudos no seu calendário. Opcionalmente, ative revisões espaçadas."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"summary",children:"Título *"}),e.jsx(p,{id:"summary",value:a.summary,onChange:s=>r({...a,summary:s.target.value}),placeholder:"Ex: Estudo de Anatomia Cardiovascular"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"description",children:"Descrição"}),e.jsx(I,{id:"description",value:a.description,onChange:s=>r({...a,description:s.target.value}),placeholder:"Descreva o que você vai estudar nesta sessão...",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"date",children:"Data *"}),e.jsx(p,{id:"date",type:"date",value:a.date,onChange:s=>r({...a,date:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"startTime",children:"Horário *"}),e.jsx(p,{id:"startTime",type:"time",value:a.startTime,onChange:s=>r({...a,startTime:s.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"duration",children:"Duração (minutos)"}),e.jsx(p,{id:"duration",type:"number",value:a.duration,onChange:s=>r({...a,duration:s.target.value}),min:"15",step:"15"})]}),e.jsxs("div",{className:"flex items-center space-x-2 p-4 border rounded-lg bg-muted/50",children:[e.jsx("input",{type:"checkbox",id:"spacedRepetition",checked:a.enableSpacedRepetition,onChange:s=>r({...a,enableSpacedRepetition:s.target.checked}),className:"h-4 w-4"}),e.jsx("label",{htmlFor:"spacedRepetition",className:"text-sm font-medium cursor-pointer",children:"Criar revisões espaçadas (1, 3, 7, 14 e 30 dias)"})]})]}),e.jsxs(W,{children:[e.jsx(i,{variant:"outline",onClick:()=>c(!1),disabled:g,children:"Cancelar"}),e.jsx(i,{onClick:A,disabled:g,className:"gap-2",children:g?e.jsxs(e.Fragment,{children:[e.jsx(f,{className:"h-4 w-4 animate-spin"}),"Criando..."]}):"Criar Sessão"})]})]})}),e.jsx("footer",{className:"border-t mt-16",children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"MedPrompts © 2026 • Desenvolvido para estudantes de Medicina"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Desenvolvido por ",e.jsx("span",{className:"font-semibold",children:"Andressa Mendes"})," • Estudante de Medicina"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Afya - Guanambi/BA"})]})})})]})}export{le as default};
